//>>built
require({cache:{"dgrid/main":function(){define("dgrid/Tree dgrid/Selection dgrid/OnDemandList dgrid/OnDemandGrid dgrid/extensions/ColumnReorder dgrid/extensions/ColumnResizer dgrid/extensions/CompoundColumns dgrid/extensions/Pagination dgrid/extensions/DnD dgrid/Editor dstore/Store dstore/Memory dstore/Tree dstore/Cache dstore/Trackable dstore/legacy/DstoreAdapter".split(" "),function(){})},"dgrid/Tree":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/Deferred dojo/dom-construct dojo/dom-class dojo/on dojo/promise/all dojo/query dojo/when ./util/has-css3 ./Grid dgrid/util/touch".split(" "),
function(t,n,r,q,d,p,m,l,h,a,c,g,e,k){return t(null,{collapseOnRefresh:!1,enableTreeTransitions:!1,treeIndentWidth:9,constructor:function(){this._treeColumnListeners=[]},shouldExpand:function(b,f,a){return a},expand:function(b,f,u,e){function k(){w||d._processScroll&&d._processScroll()}if(this._treeColumn){var d=this,h=b.element?b:this.row(b),D=!!this._expanded[h.id],v=g("transitionend"),r;b=h.element;b=-1<b.className.indexOf("dgrid-expando-icon")?b:a(".dgrid-expando-icon",b)[0];u=u||!this.enableTreeTransitions;
if(b&&b.mayHaveChildren&&(u||f!==D)){var w=void 0===f?!this._expanded[h.id]:f,q=this.getScrollPosition();this._resetExpanded(h.id,w);m.replace(b,"ui-icon-triangle-1-"+(w?"se":"e"),"ui-icon-triangle-1-"+(w?"e":"se"));m.toggle(h.element,"dgrid-row-expanded",w);f=h.element;var x=f.connected,t,F,z={};if(!x){var x=z.container=f.connected=p.create("div",{className:"dgrid-tree-container"},f,"after"),A=function(f){var b=d._renderedCollection.getChildren(h.data);d.sort&&0<d.sort.length&&(b=b.sort(d.sort));
b.track&&d.shouldTrackCollection&&(x._rows=f.rows=[],b=b.track(),x._handles=[b.tracking,d._observeCollection(b,x,f)]);A.collection=b;return"start"in f?b.fetchRange({start:f.start,end:f.start+f.count}):b.fetch()};"level"in b&&(x.level=A.level=b.level+1);if(this.renderQuery)r=e?d._renderedCollection.getChildren(h.data).fetchRange({start:0,end:1}).totalLength.then(function(f){z.start=f-d.minRowsPerPage;z.end=f-1;z.count=d.minRowsPerPage;d._previousScrollPosition=q;return d.renderQuery(A,z)}):this.renderQuery(A,
z);else{var G=p.create("div",null,x);r=this._trackError(function(){return d.renderQueryResults(A(z),G,n.mixin({rows:z.rows},"level"in A?{queryLevel:A.level}:null)).then(function(f){p.destroy(G);return f})})}v&&l(x,v,this._onTreeTransitionEnd)}x.hidden=!w;t=x.style;!v||u?(t.display=w?"block":"none",t.height="",k()):(l.once(x,v,k),w?(t.display="block",F=x.scrollHeight,t.height="0px"):(m.add(x,"dgrid-tree-resetting"),t.height=x.scrollHeight+"px"),setTimeout(function(){m.remove(x,"dgrid-tree-resetting");
t.height=w?F?F+"px":"auto":"0px"},0))}return c(r)}},_configColumns:function(){var b=this.inherited(arguments);this._resetExpanded();for(var f=0,a=b.length;f<a;f++)if(b[f].renderExpando){this._configureTreeColumn(b[f]);break}return b},insertRow:function(b,f,a,c,e){e=e||{};var g=e.queryLevel="queryLevel"in e?e.queryLevel:"level"in f?f.level:0,k=this.inherited(arguments),d=this.row(k);(g=this.shouldExpand(d,g,this._expanded[d.id]))&&this._expandWhenInDom(k,e);(g||!this.collection.mayHaveChildren||this.collection.mayHaveChildren(b))&&
m.add(k,"dgrid-row-expandable");return k},_expandWhenInDom:function(b,f,a){b.offsetHeight?(b=this.expand(b,!0,!0,f.scrollingUp),a&&b.then(function(){a.resolve()})):b.parentNode&&this.domNode.offsetHeight&&(this._expandPromises&&!a&&(a=new d,this._expandPromises.push(a.promise)),setTimeout(this._expandWhenInDom.bind(this,b,f,a),0))},_queueNodeForDeletion:function(b){this.inherited(arguments);var f=b.connected;f&&this._deleteQueue.push(f)},_pruneRow:function(b,f){var c=b.connected,e;if(c){var g=this.row(b).id;
this._expanded[g]&&(e=a("\x3e.dgrid-preload",c)[f?1:0])&&(e=this._findPreload(e),e=f?e.next:e.previous,e.expandedContent||(e.expandedContent={}),e.expandedContent[g]=c.offsetHeight)}this.inherited(arguments,[b,f,{treePrune:!0,removeBelow:f}])},refresh:function(b){this._expandPromises=[];return((this.keepScrollPosition||b&&b.keepScrollPosition)&&Object.keys(this._expanded).length?this.inherited(arguments,n.mixin(b||{},{keepScrollPosition:!1})):this.inherited(arguments)).then(function(){var f=this._expandPromises;
delete this._expandPromises;return h(f)}.bind(this))},removeRow:function(b,f,c){var e=b.connected,g={},k,d,l,h;e&&(e._handles&&(r.forEach(e._handles,function(f){f.remove()}),delete e._handles),e._rows&&(g.rows=e._rows),k=a("\x3e.dgrid-row",e),d=a("\x3e.dgrid-preload",e),k&&k.length&&(this._releaseRange&&(l=k[0].rowIndex,h=k[k.length-1].rowIndex,this._releaseRange(this._findPreload(d[0]),!1,l,h)),k.forEach(function(f){c&&c.treePrune?this._pruneRow(f,c.removeBelow):this.removeRow(f,!0,g)},this)),this._removePreloads&&
this._removePreloads(d),e._rows&&(e._rows.length=0,delete e._rows),f?this._queueNodeForDeletion(e):p.destroy(e));this.inherited(arguments)},_refreshCellFromItem:function(b,f){if(!b.column.renderExpando)return this.inherited(arguments);this.inherited(arguments,[b,f,{queryLevel:a(".dgrid-expando-icon",b.element)[0].level}])},cleanup:function(){this.inherited(arguments);this.collapseOnRefresh&&this._resetExpanded()},_destroyColumns:function(){this.inherited(arguments);for(var b=this._treeColumnListeners,
f=b.length;f--;)b[f].remove();this._treeColumnListeners=[];this._treeColumn=null},_calcRowHeight:function(b){var f=b.connected;return this.inherited(arguments)+(f?f.offsetHeight:0)},_configureTreeColumn:function(b){var f=this,a=".dgrid-content .dgrid-column-"+b.id,c;this._treeColumn=b;if(!b._isConfiguredTreeColumn){var e=b.renderCell||this._defaultRenderCell;b._isConfiguredTreeColumn=!0;b.renderCell=function(a,c,u,g){var y=g&&"queryLevel"in g?g.queryLevel:0,k=!f.collection.mayHaveChildren||f.collection.mayHaveChildren(a),
d;d=b.renderExpando(y,k,f._expanded[f.collection.getIdentity(a)],a);d.level=y;d.mayHaveChildren=k;(a=e.call(b,a,c,u,g))&&a.nodeType?(u.appendChild(d),u.appendChild(a)):u.insertBefore(d,u.firstChild)};"function"!==typeof b.renderExpando&&(b.renderExpando=this._defaultRenderExpando)}var d=this._treeColumnListeners;0===d.length&&(d.push(this.on(b.expandOn||".dgrid-expando-icon:click,"+a+":dblclick,"+a+":keydown",function(b){var a=f.row(b);f.collection.mayHaveChildren&&!f.collection.mayHaveChildren(a.data)||
"keydown"===b.type&&32!==b.keyCode||"dblclick"===b.type&&c&&1<c.count&&a.id===c.id&&-1<b.target.className.indexOf("dgrid-expando-icon")||f.expand(a);-1<b.target.className.indexOf("dgrid-expando-icon")&&(c&&c.id===f.row(b).id?c.count++:c={id:f.row(b).id,count:1})})),g("touch")&&d.push(this.on(k.selector(a,k.dbltap),function(){f.expand(this)})))},_defaultRenderExpando:function(b,f,a){var c=this.grid.isRTL?"right":"left",e="dgrid-expando-icon";f&&(e+=" ui-icon ui-icon-triangle-1-"+(a?"se":"e"));return p.create("div",
{className:e,innerHTML:"\x26nbsp;",style:"margin-"+c+": "+b*this.grid.treeIndentWidth+"px; float: "+c+";"})},_onNotification:function(b,f){"delete"===f.type&&this._resetExpanded(f.id);this.inherited(arguments)},_onTreeTransitionEnd:function(b){var f=this,a=this.style.height;a&&(this.style.display="0px"===a?"none":"block");b&&(m.add(this,"dgrid-tree-resetting"),setTimeout(function(){m.remove(f,"dgrid-tree-resetting")},0));this.style.height=""},_resetPlaceHolder:function(b){var f=this._getHeadPreload&&
this._getHeadPreload();if(f)if(null!=b)a:for(;f;){var a=f.expandedContent;if(a&&a[b]){delete a[b];this._adjustPreloadHeight(f);break a}f=f.next}else for(b=f;b;)b.expandedContent&&(delete b.expandedContent,this._adjustPreloadHeight(b)),b=b.next},_resetExpanded:function(b,f){this._resetPlaceHolder(b);null==b?this._expanded={}:f?this._expanded[b]=!0:delete this._expanded[b]},_calculatePreloadHeight:function(b){var f=this.inherited(arguments),a=b.expandedContent;a&&Object.keys(a).forEach(function(b){f+=
a[b]});return f},_getRenderedCollection:function(b){return b.level?b.query.collection:this.inherited(arguments)}})})},"dgrid/util/has-css3":function(){define(["dojo/has"],function(t){function n(n,d){var p=n.style,m;if(d in p)return!0;d=d.slice(0,1).toUpperCase()+d.slice(1);for(m=r.length;m--;)if(r[m]+d in p)return r[m];return!1}var r=["ms","O","Moz","Webkit"];t.add("css-transitions",function(r,d,p){return n(p,"transitionProperty")});t.add("css-transforms",function(r,d,p){return n(p,"transform")});
t.add("css-transforms3d",function(r,d,p){return n(p,"perspective")});t.add("transitionend",function(){var n=t("css-transitions");return n?!0===n?"transitionend":{ms:"MSTransitionEnd",O:"oTransitionEnd",Moz:"transitionend",Webkit:"webkitTransitionEnd"}[n]:!1});return t})},"dgrid/Grid":function(){define("dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/has ./List ./util/misc dojo/_base/sniff".split(" "),function(t,n,r,q,d,p,m,l){function h(a,c){c&&c.nodeType&&a.appendChild(c)}
t=t(m,{columns:null,hasNeutralSort:!1,cellNavigation:!0,tabableHeader:!0,showHeader:!0,column:function(a){return"object"!==typeof a?this.columns[a]:this.cell(a).column},listType:"grid",cell:function(a,c){if(a.column&&a.element)return a;a.target&&a.target.nodeType&&(a=a.target);var g;if(a.nodeType){do{if(this._rowIdToObject[a.id])break;var e=a.columnId;if(e){c=e;g=a;break}a=a.parentNode}while(a&&a!==this.domNode)}if(!g&&"undefined"!==typeof c){var k=this.row(a);if(e=k&&k.element)for(var e=e.getElementsByTagName("td"),
b=0;b<e.length;b++)if(e[b].columnId===c){g=e[b];break}}if(null!=a)return{row:k||this.row(a),column:c&&this.column(c),element:g}},createRowCells:function(a,c,g,e,k){var b=r.create("table",{className:"dgrid-row-table",role:"presentation"}),f=9>p("ie")?r.create("tbody",null,b):b,u,y,d,h,m,D,v,n,w,q;g=g||this.subRows;y=0;for(d=g.length;y<d;y++)for(D=g[y],u=r.create("tr",null,f),D.className&&(u.className=D.className),h=0,m=D.length;h<m;h++){v=D[h];n=v.id;w=v.field?" field-"+l.escapeCssIdentifier(v.field,
"-"):"";(q="function"===typeof v.className?v.className(e):v.className)&&(w+=" "+q);w=r.create(a,{className:"dgrid-cell"+(n?" dgrid-column-"+l.escapeCssIdentifier(n,"-"):"")+w,role:"th"===a?"columnheader":"gridcell"});w.columnId=n;if(n=v.colSpan)w.colSpan=n;if(n=v.rowSpan)w.rowSpan=n;c(w,v,e,k);u.appendChild(w)}return b},_createBodyRowCell:function(a,c,g,e){var k=g;c.get?k=c.get(g):"field"in c&&"_item"!==c.field&&(k=g[c.field]);c.renderCell?h(a,c.renderCell(g,k,a,e)):this._defaultRenderCell.call(c,
g,k,a,e)},_createHeaderRowCell:function(a,c){var g=c.headerNode=a,e=c.field;e&&(a.field=e);c.renderHeaderCell?h(g,c.renderHeaderCell(g)):("label"in c||c.field)&&g.appendChild(document.createTextNode("label"in c?c.label:c.field));!1!==c.sortable&&e&&"_item"!==e&&(a.sortable=!0,a.className+=" dgrid-sortable")},left:function(a,c){a.element||(a=this.cell(a));return this.cell(this._move(a,-(c||1),"dgrid-cell"))},right:function(a,c){a.element||(a=this.cell(a));return this.cell(this._move(a,c||1,"dgrid-cell"))},
_defaultRenderCell:function(a,c,g){if(this.formatter){var e=this.formatter,k=this.grid.formatterScope;g.innerHTML="string"===typeof e&&k?k[e](c,a):this.formatter(c,a)}else null!=c&&g.appendChild(document.createTextNode(c))},renderRow:function(a,c){var g=this.createRowCells("td",n.hitch(this,"_createBodyRowCell"),c&&c.subRows,a,c),e=r.create("div",{role:"row"});e.appendChild(g);return e},renderHeader:function(){var a=this,c=this.headerNode;c.setAttribute("role","row");r.empty(c);var g=this.createRowCells("th",
n.hitch(this,"_createHeaderRowCell"),this.subRows&&this.subRows.headerRows);this._rowIdToObject[g.id=this.id+"-header"]=this.columns;c.appendChild(g);this._sortListener&&this._sortListener.remove();this._sortListener=d(g,"click,keydown",function(e){if("click"===e.type||32===e.keyCode||!p("opera")&&13===e.keyCode){var g=e.target,b,f;do if(g.sortable){b=g.field||g.columnId;f=a.sort[0];b=a.hasNeutralSort&&f&&f.property===b&&f.descending?[]:[{property:b,descending:f&&f.property===b&&!f.descending}];f=
{bubbles:!0,cancelable:!0,grid:a,parentType:e.type,sort:b};d.emit(e.target,"dgrid-sort",f)&&(a._sortNode=g,a.set("sort",b));break}while((g=g.parentNode)&&g!==c)}})},resize:function(){if(this.headerNode){var a=this.headerNode.firstChild,c=this.contentNode,g;this.inherited(arguments);c.style.width="";c&&a&&(g=a.offsetWidth)>c.offsetWidth&&(c.style.width=g+"px")}},destroy:function(){this._destroyColumns();this._sortListener&&this._sortListener.remove();this.inherited(arguments)},_setSort:function(){this.inherited(arguments);
this.updateSortArrow(this.sort)},_findSortArrowParent:function(a){var c=this.columns,g;for(g in c){var e=c[g];if(e.field===a)return e.headerNode}},updateSortArrow:function(a,c){this._lastSortedArrow&&(q.remove(this._lastSortedArrow.parentNode,"dgrid-sort-up dgrid-sort-down"),r.destroy(this._lastSortedArrow),delete this._lastSortedArrow);c&&(this.sort=a);if(a[0]){var g=a[0].property,e=a[0].descending,g=this._sortNode||this._findSortArrowParent(g);delete this._sortNode;g&&(g=g.contents||g,this._lastSortedArrow=
r.create("div",{className:"dgrid-sort-arrow ui-icon",innerHTML:"\x26nbsp;",role:"presentation"},g,"first"),q.add(g,"dgrid-sort-"+(e?"down":"up")),this.resize())}},styleColumn:function(a,c){return this.addCssRule("#"+l.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+l.escapeCssIdentifier(a,"-"),c)},_configColumns:function(a,c){var g=[],e=c instanceof Array;l.each(c,function(k,b){"string"===typeof k&&(c[b]=k={label:k});e||k.field||(k.field=b);b=k.id=k.id||(isNaN(b)?b:a+b);this._configColumn&&
(this._configColumn(k,c,a),b=k.id);e&&(this.columns[b]=k);k.grid=this;g.push(k)},this);return e?c:g},_destroyColumns:function(){this.cleanup()},configStructure:function(){var a=this.subRows,c=this._columns=this.columns;this.columns=!c||c instanceof Array?{}:c;if(a)for(c=0;c<a.length;c++)a[c]=this._configColumns(c+"-",a[c]);else this.subRows=[this._configColumns("",c)]},_getColumns:function(){return this._columns||this.columns},_setColumns:function(a){this._destroyColumns();this.subRows=null;this.columns=
a;this._updateColumns()},_setSubRows:function(a){this._destroyColumns();this.subRows=a;this._updateColumns()},_updateColumns:function(){this.configStructure();this.renderHeader();this.refresh();this._lastCollection&&this.renderArray(this._lastCollection);this._started&&(this.sort.length?(this._lastSortedArrow=null,this.updateSortArrow(this.sort)):this.resize())}});t.appendIfNode=h;return t})},"dgrid/List":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-class dojo/on dojo/has ./util/misc dojo/_base/sniff".split(" "),
function(t,n,r,q,d,p){function m(f,b){f.className="dgrid-scrollbar-measure";document.body.appendChild(f);var a=f["offset"+b]-f["client"+b];f.className="";f.parentNode&&document.body.removeChild(f);return a}function l(f){r.replace(this.domNode,f,this._class||"");this._class=f}function h(){return this._class}var a=[];d("mozilla")&&a.push("has-mozilla");d("touch")&&a.push("has-touch");r.add(document.documentElement,a);d.add("pointer",function(f){return"PointerEvent"in f?"pointer":"MSPointerEvent"in f?
"MSPointer":!1});var c,g;d.add("dom-scrollbar-width",function(f,b,a){return m(a,"Width")});d.add("dom-scrollbar-height",function(f,b,a){return m(a,"Height")});d.add("dom-rtl-scrollbar-left",function(f,b,a){f=document.createElement("div");a.className="dgrid-scrollbar-measure";a.setAttribute("dir","rtl");a.appendChild(f);document.body.appendChild(a);b=!!d("ie")||!!d("trident")||/\bEdge\//.test(navigator.userAgent)||f.offsetLeft>=d("dom-scrollbar-width");a.className="";a.parentNode&&document.body.removeChild(a);
n.destroy(f);a.removeAttribute("dir");return b});var e=0,k=function(){this._started&&this.resize()},b=t(null,{tabableHeader:!1,showHeader:!1,showFooter:!1,maintainOddEven:!0,cleanAddedRules:!0,addUiClasses:!0,highlightDuration:250,postscript:function(f,b){var a=this;(this._Row=function(f,b,a){this.id=f;this.data=b;this.element=a}).prototype.remove=function(){a.removeRow(this.element)};b&&(this.srcNodeRef=b=b.nodeType?b:document.getElementById(b));this.create(f,b)},listType:"list",create:function(f,
a){var c=this.domNode=a||document.createElement("div"),g;f&&(this.params=f,t.safeMixin(this,f),g=f["class"]||f.className||c.className);this.sort=this.sort||[];this._listeners=[];this._rowIdToObject={};this.postMixInProperties&&this.postMixInProperties();this.id=c.id=c.id||this.id||b.autoIdPrefix+e++;this.buildRendering();g&&l.call(this,g);this.postCreate();delete this.srcNodeRef},buildRendering:function(){var f=this.domNode,b=this.addUiClasses,a=this,c,e,g;g=this.isRTL="rtl"===(document.body.dir||
document.documentElement.dir||document.body.style.direction).toLowerCase();f.className="";f.setAttribute("role","grid");r.add(f,"dgrid dgrid-"+this.listType+(b?" ui-widget":""));c=this.headerNode=n.create("div",{tabIndex:-1,className:"dgrid-header dgrid-header-row"+(b?" ui-widget-header":"")+(this.showHeader?"":" dgrid-header-hidden")},f);e=this.bodyNode=n.create("div",{className:"dgrid-scroller"},f);d("ff")&&(e.tabIndex=-1);this.headerScrollNode=n.create("div",{className:"dgrid-header dgrid-header-scroll dgrid-scrollbar-width"+
(b?" widget":"")},f);this.footerNode=n.create("div",{className:"dgrid-footer"+(this.showFooter?"":" dgrid-footer-hidden")},f);g&&(f.className+=" dgrid-rtl"+(d("dom-rtl-scrollbar-left")?" dgrid-rtl-swap":""));q(e,"scroll",function(b){a.showHeader&&(c.scrollLeft=b.scrollLeft||e.scrollLeft);b.stopPropagation();q.emit(f,"scroll",{scrollTarget:e})});this.configStructure();this.renderHeader();this.contentNode=this.touchNode=n.create("div",{className:"dgrid-content"+(b?" widget":"")},this.bodyNode);this._listeners.push(this._resizeHandle=
q(window,"resize",p.throttleDelayed(k,this)))},postCreate:function(){},startup:function(){this._started||(this.inherited(arguments),this._started=!0,this.resize(),this.set("sort",this.sort))},configStructure:function(){},resize:function(){var f=this.bodyNode,b=this.footerNode,b=this.showFooter?b.offsetHeight:0;this.headerScrollNode.style.height=f.style.marginTop=this.headerNode.offsetHeight+"px";f.style.marginBottom=b+"px";c||(c=d("dom-scrollbar-width"),g=d("dom-scrollbar-height"),d("ie")&&(c++,g++),
17!==c&&p.addCssRule(".dgrid-rtl-swap .dgrid-header-row","left: "+c+"px"))},addCssRule:function(f,b){var a=p.addCssRule(f,b);this.cleanAddedRules&&this._listeners.push(a);return a},on:function(f,b){var a=q(this.domNode,f,b);d("dom-addeventlistener")||this._listeners.push(a);return a},cleanup:function(){for(var f in this._rowIdToObject)if(this._rowIdToObject[f]!==this.columns){var b=document.getElementById(f);b&&this.removeRow(b,!0)}},destroy:function(){if(this._listeners){for(var f=this._listeners.length;f--;)this._listeners[f].remove();
this._listeners=null}this._started=!1;this.cleanup();n.destroy(this.domNode)},refresh:function(){this.cleanup();this._rowIdToObject={};this._autoRowId=0;this.contentNode.innerHTML="";this.scrollTo({x:0,y:0})},highlightRow:function(f,b){var a="dgrid-highlight"+(this.addUiClasses?" ui-state-highlight":"");f=f.element||f;r.add(f,a);setTimeout(function(){r.remove(f,a)},b||this.highlightDuration)},adjustRowIndices:function(f){var b=f.rowIndex;if(-1<b){do-1<f.rowIndex&&(this.maintainOddEven&&r.contains(f,
"dgrid-row")&&r.replace(f,1===b%2?"dgrid-row-odd":"dgrid-row-even",0===b%2?"dgrid-row-odd":"dgrid-row-even"),f.rowIndex=b++);while((f=f.nextSibling)&&f.rowIndex!==b)}},renderArray:function(f,b,a){a=a||{};var c=a.start||0,e=document.createDocumentFragment(),g=[],k=0,d=f.length;b||(this._lastCollection=f);for(;k<d;)g[k]=this.insertRow(f[k],e,null,c++,a),k++;(f=b?b.parentNode:this.contentNode)&&f.parentNode&&(f!==this.contentNode||d)&&(f.insertBefore(e,b||null),d&&this.adjustRowIndices(g[d-1]));return g},
renderHeader:function(){},_autoRowId:0,insertRow:function(f,b,a,c,e){var g=this.id+"-row-"+(this.collection&&this.collection.getIdentity?this.collection.getIdentity(f):this._autoRowId++),k=document.getElementById(g),d=k&&k.previousSibling;k&&(k===a&&(a=(a.connected||a).nextSibling),this.removeRow(k,!1,e));k=this.renderRow(f,e);k.className=(k.className||"")+" dgrid-row "+(1===c%2?"dgrid-row-odd":"dgrid-row-even");this._rowIdToObject[k.id=g]=f;b.insertBefore(k,a||null);k.rowIndex=c;d&&d.rowIndex!==
k.rowIndex-1&&this.adjustRowIndices(d);return k},renderRow:function(f){var b=document.createElement("div");b.appendChild(document.createTextNode(f));return b},removeRow:function(f,b){f=f.element||f;delete this._rowIdToObject[f.id];b||n.destroy(f)},row:function(f){var b;if(f instanceof this._Row)return f;if(!f)return null;f.target&&f.target.nodeType&&(f=f.target);if(f.nodeType){do{var a=f.id;if(b=this._rowIdToObject[a])return new this._Row(a.substring(this.id.length+5),b,f);f=f.parentNode}while(f&&
f!==this.domNode)}else return"object"===typeof f?b=this.collection.getIdentity(f):(b=f,f=this._rowIdToObject[this.id+"-row-"+b]),new this._Row(b,f,document.getElementById(this.id+"-row-"+b))},cell:function(b){return{row:this.row(b)}},_move:function(b,a,c,e){var g,k;k=g=b.element;a=a||1;do if(b=g[0>a?"previousSibling":"nextSibling"]){do if((g=b)&&-1<(g.className+" ").indexOf(c+" ")){k=g;a+=0>a?1:-1;break}while(b=(!e||!g.hidden)&&g[0>a?"lastChild":"firstChild"])}else if(g=g.parentNode,!g||g===this.bodyNode||
g===this.headerNode)break;while(a);return k},up:function(b,a,c){if(!b)return null;b.element||(b=this.row(b));return this.row(this._move(b,-(a||1),"dgrid-row",c))},down:function(b,a,c){if(!b)return null;b.element||(b=this.row(b));return this.row(this._move(b,a||1,"dgrid-row",c))},scrollTo:function(b){"undefined"!==typeof b.x&&(this.bodyNode.scrollLeft=b.x);"undefined"!==typeof b.y&&(this.bodyNode.scrollTop=b.y)},getScrollPosition:function(){return{x:this.bodyNode.scrollLeft,y:this.bodyNode.scrollTop}},
get:function(b){var a="_get"+b.charAt(0).toUpperCase()+b.slice(1);return"function"===typeof this[a]?this[a].apply(this,[].slice.call(arguments,1)):this[b]},set:function(b,a){if("object"===typeof b)for(var c in b)this.set(c,b[c]);else c="_set"+b.charAt(0).toUpperCase()+b.slice(1),"function"===typeof this[c]?this[c].apply(this,[].slice.call(arguments,1)):this[b]=a;return this},_getClass:h,_setClass:l,_getClassName:h,_setClassName:l,_setSort:function(b,a){this.sort="string"!==typeof b?b:[{property:b,
descending:a}];this._applySort()},_applySort:function(){this.refresh();if(this._lastCollection){var b=this.sort;if(b&&0<b.length){var a=b[0].property,c=!!b[0].descending;this._lastCollection.sort(function(b,f){var e=b[a],g=f[a];void 0===e&&(e="");void 0===g&&(g="");return e===g?0:e>g!==c?1:-1})}this.renderArray(this._lastCollection)}},_setShowHeader:function(b){var a=this.headerNode;this.showHeader=b;r.toggle(a,"dgrid-header-hidden",!b);this.renderHeader();this.resize();b&&(a.scrollLeft=this.getScrollPosition().x)},
_setShowFooter:function(b){this.showFooter=b;r.toggle(this.footerNode,"dgrid-footer-hidden",!b);this.resize()}});b.autoIdPrefix="dgrid_";return b})},"dgrid/util/misc":function(){define(["dojo/has"],function(t){t.add("dom-contains",function(d,h,a){return!!a.contains});var n=[],r,q,d,p=/([^A-Za-z0-9_\u00A0-\uFFFF-])/g,m={defaultDelay:15,throttle:function(d,h,a){var c=!1;a=a||m.defaultDelay;return function(){c||(c=!0,d.apply(h,arguments),setTimeout(function(){c=!1},a))}},throttleDelayed:function(d,h,
a){var c=!1;a=a||m.defaultDelay;return function(){if(!c){c=!0;var g=arguments;setTimeout(function(){c=!1;d.apply(h,g)},a)}}},debounce:function(d,h,a){var c;a=a||m.defaultDelay;return function(){c&&(clearTimeout(c),c=null);var g=arguments;c=setTimeout(function(){d.apply(h,g)},a)}},each:function(d,h,a){var c,g;if(d)if("number"===typeof d.length)for(c=0,g=d.length;c<g;c++)h.call(a,d[c],c,d);else for(c in d)h.call(a,d[c],c,d)},contains:function(d,h){return t("dom-contains")?d.contains(h):d.compareDocumentPosition(h)&
8},addCssRule:function(m,h){r||(r=document.createElement("style"),document.getElementsByTagName("head")[0].appendChild(r),r=r.sheet||r.styleSheet,q=r.deleteRule?"deleteRule":"removeRule",d=r.cssRules?"cssRules":"rules");var a=n.length;n[a]=(r.cssRules||r.rules).length;r.addRule?r.addRule(m,h):r.insertRule(m+"{"+h+"}",n[a]);return{get:function(c){return r[d][n[a]].style[c]},set:function(c,g){"undefined"!==typeof n[a]&&(r[d][n[a]].style[c]=g)},remove:function(){var c=n[a],g,e;if(void 0!==c)for(r[q](c),
n[a]=void 0,g=a+1,e=n.length;g<e;g++)n[g]>c&&n[g]--}}},escapeCssIdentifier:function(d,h){return"string"===typeof d?d.replace(p,h||"\\$1"):d}};return m})},"dgrid/util/touch":function(){define(["dojo/on"],function(t,n){function r(d,p,m,l){if(!(1<m.targetTouches.length)){var h=m.changedTouches[0],a=h.screenX,c=h.screenY;l&&m.preventDefault();var g=t(d,"touchend",function(e){var k=e.changedTouches[0];e.targetTouches.length||(Math.abs(k.screenX-a)<q.tapRadius&&Math.abs(k.screenY-c)<q.tapRadius&&(l&&e.preventDefault(),
p.call(this,e)),g.remove())})}}var q={tapRadius:10,dbltapTime:250,selector:function(d,p,m){return function(l,h){var a=p.bubble;a?p=a:!1!==m&&(m=!0);return t(l,p,function(a){var g=a.target;3===g.nodeType&&(g=g.parentNode);for(;!n.matches(g,d,l);)if(g===l||!m||!(g=g.parentNode))return;return h.call(g,a)})}},countCurrentTouches:function(d,p){if(!("touches"in d))return-1;var m,l,h;for(l=m=0;h=d.touches[m];++m)p.contains(h.target)&&++l;return l},tap:function(d,p){return t(d,"touchstart",function(m){r(d,
p,m)})},dbltap:function(d,p){var m,l;return t(d,"touchstart",function(h){m?r(d,function(a){if(m){var c=a.changedTouches[0];Math.abs(c.screenX-m.screenX)<q.tapRadius&&Math.abs(c.screenY-m.screenY)<q.tapRadius&&(l&&clearTimeout(l),m=l=null,p.call(this,a))}},h,!0):r(d,function(a){m=a.changedTouches[0];l=setTimeout(function(){m=l=null},q.dbltapTime)},h)})}};return q})},"dgrid/Selection":function(){define("dojo/_base/declare dojo/dom-class dojo/on dojo/has dojo/aspect ./List dgrid/util/touch dojo/query dojo/_base/sniff dojo/dom".split(" "),
function(t,n,r,q,d,p,m){function l(b,a){for(var c=b.unselectable=a?"on":"",e=b.getElementsByTagName("*"),g=e.length;--g;)"INPUT"!==e[g].tagName&&"TEXTAREA"!==e[g].tagName&&(e[g].unselectable=c)}function h(b,a){var e=b.bodyNode,g=a?"text":21>q("ff")?"-moz-none":"none";c&&"msUserSelect"!==c?e.style[c]=g:q("dom-selectstart")?a||b._selectstartHandle?a&&b._selectstartHandle&&(b._selectstartHandle.remove(),delete b._selectstartHandle):b._selectstartHandle=r(e,"selectstart",function(b){var a=b.target&&b.target.tagName;
"INPUT"!==a&&"TEXTAREA"!==a&&b.preventDefault()}):(l(e,!a),a||b._unselectableHandle)?a&&b._unselectableHandle&&(b._unselectableHandle.remove(),delete b._unselectableHandle):b._unselectableHandle=d.after(b,"renderRow",function(b){l(b,!0);return b})}q.add("dom-comparedocumentposition",function(b,a,c){return!!c.compareDocumentPosition});q.add("dom-selectstart","undefined"!==typeof document.onselectstart);var a=q("mac")?"metaKey":"ctrlKey",c=q("css-user-select"),g=(p=q("pointer"))&&"MS"===p.slice(0,2),
e=p?p+(g?"Down":"down"):"mousedown",k=p?p+(g?"Up":"up"):"mouseup";"WebkitUserSelect"===c&&"undefined"!==typeof document.documentElement.style.msUserSelect&&(c=!1);return t(null,{selectionDelegate:".dgrid-row",selectionEvents:e+","+k+",dgrid-cellfocusin",selectionTouchEvents:q("touch")?m.tap:null,deselectOnRefresh:!0,allowSelectAll:!1,selection:{},selectionMode:"extended",allowTextSelection:void 0,_selectionTargetType:"rows",create:function(){this.selection={};return this.inherited(arguments)},postCreate:function(){this.inherited(arguments);
this._initSelectionEvents();var b=this.selectionMode;this.selectionMode="";this._setSelectionMode(b)},destroy:function(){this.inherited(arguments);this._selectstartHandle&&this._selectstartHandle.remove();this._unselectableHandle&&this._unselectableHandle.remove();this._removeDeselectSignals&&this._removeDeselectSignals()},_setSelectionMode:function(b){b!==this.selectionMode&&(this.clearSelection(),this.selectionMode=b,this._selectionHandlerName="_"+b+"SelectionHandler",this._setAllowTextSelection(this.allowTextSelection))},
_setAllowTextSelection:function(b){"undefined"!==typeof b?h(this,b):h(this,"none"===this.selectionMode);this.allowTextSelection=b},_handleSelect:function(b,a){if(this[this._selectionHandlerName]&&this.allowSelect(this.row(a))&&("dgrid-cellfocusin"!==b.type||"mousedown"!==b.parentType)&&(b.type!==k||a===this._waitForMouseUp)){this._waitForMouseUp=null;this._selectionTriggerEvent=b;if(!b.keyCode||!b.ctrlKey||32===b.keyCode)if(!b.shiftKey&&b.type===e&&this.isSelected(a))this._waitForMouseUp=a;else this[this._selectionHandlerName](b,
a);this._selectionTriggerEvent=null}},_singleSelectionHandler:function(b,f){var c=b.keyCode?b.ctrlKey:b[a];this._lastSelected===f?this.select(f,null,!c||!this.isSelected(f)):(this.clearSelection(),this.select(f),this._lastSelected=f)},_multipleSelectionHandler:function(b,f){var c=this._lastSelected,e=b.keyCode?b.ctrlKey:b[a],g;b.shiftKey||(g=e?null:!0,c=null);this.select(f,c,g,null,-1!==b.type.indexOf("mouse")?"mouse":b.type);c||(this._lastSelected=f)},_extendedSelectionHandler:function(b,f){(2===
b.button?this.isSelected(f):b.keyCode?b.ctrlKey:b[a])||this.clearSelection(null,!0);this._multipleSelectionHandler(b,f)},_toggleSelectionHandler:function(b,a){this.select(a,null,null)},_initSelectionEvents:function(){var b=this,f=this.contentNode,c=this.selectionDelegate;this._selectionEventQueues={deselect:[],select:[]};q("touch")&&!q("pointer")&&this.selectionTouchEvents?(r(f,m.selector(c,this.selectionTouchEvents),function(a){b._handleSelect(a,this);b._ignoreMouseSelect=this}),r(f,r.selector(c,
this.selectionEvents),function(a){b._ignoreMouseSelect!==this?b._handleSelect(a,this):a.type===k&&(b._ignoreMouseSelect=null)})):r(f,r.selector(c,this.selectionEvents),function(a){b._handleSelect(a,this)});this.addKeyHandler&&this.addKeyHandler(32,function(a){b._handleSelect(a,a.target)});if(this.allowSelectAll)this.on("keydown",function(f){f[a]&&65===f.keyCode&&!/\bdgrid-input\b/.test(f.target.className)&&(f.preventDefault(),b[b.allSelected?"clearSelection":"selectAll"]())});this._setCollection&&
d.before(this,"_setCollection",function(a){b._updateDeselectionAspect(a)});this._updateDeselectionAspect()},_updateDeselectionAspect:function(b){function a(b,f,e){if((b=c.row(b))&&c.selection[b.id])c[f](b,null,!0,null,e)}var c=this,e;this._removeDeselectSignals&&this._removeDeselectSignals();e=b&&b.track&&this._observeCollection?[d.before(this,"_observeCollection",function(b){e.push(b.on("delete",function(b){"undefined"===typeof b.index&&a(b.id,"deselect")}))}),d.after(this,"_observeCollection",function(b){e.push(b.on("update",
function(c){"undefined"!==typeof c.index&&a(b.getIdentity(c.target),"select","update")}))},!0)]:[d.before(this,"removeRow",function(b,a){var f;a||(f=this.row(b))&&f.id in this.selection&&this.deselect(f)})];this._removeDeselectSignals=function(){for(var b=e.length;b--;)e[b].remove();e=[]}},allowSelect:function(){return!0},_fireSelectionEvent:function(b){var a=this._selectionEventQueues[b],c=this._selectionTriggerEvent,e;e={bubbles:!0,grid:this};c&&(e.parentType=c.type);e[this._selectionTargetType]=
a;this._selectionEventQueues[b]=[];r.emit(this.contentNode,"dgrid-"+b,e)},_fireSelectionEvents:function(){var b=this._selectionEventQueues,a;for(a in b)b[a].length&&this._fireSelectionEvent(a)},_select:function(b,a,c){var e,g,k;"undefined"===typeof c&&(c=!0);b.element||(b=this.row(b));if(!1===c||this.allowSelect(b))if(e=this.selection,g=!!e[b.id],null===c&&(c=!g),k=b.element,c||this.allSelected?e[b.id]=c:delete this.selection[b.id],k&&(c?n.add(k,"dgrid-selected"+(this.addUiClasses?" ui-state-active":
"")):n.remove(k,"dgrid-selected ui-state-active")),c!==g&&k&&this._selectionEventQueues[(c?"":"de")+"select"].push(b),a)if(a.element||(a=this.row(a)),a){if(a=a.element)for(e=this._determineSelectionDirection(k,a),e||(a=document.getElementById(a.id),e=this._determineSelectionDirection(k,a));b.element!==a&&(b=this[e](b));)this._select(b,null,c)}else this._lastSelected=k},_determineSelectionDirection:q("dom-comparedocumentposition")?function(b,a){var c=a.compareDocumentPosition(b);return c&1?!1:2===
c?"down":"up"}:function(b,a){return 1>a.sourceIndex?!1:a.sourceIndex>b.sourceIndex?"down":"up"},select:function(b,a,c){this._select(b,a,c);this._fireSelectionEvents()},deselect:function(b,a){this.select(b,a,!1)},clearSelection:function(b,a){this.allSelected=!1;for(var c in this.selection)b!==c&&this._select(c,null,!1);a||(this._lastSelected=null);this._fireSelectionEvents()},selectAll:function(){this.allSelected=!0;this.selection={};for(var b in this._rowIdToObject){var a=this.row(this._rowIdToObject[b]);
this._select(a.id,null,!0)}this._fireSelectionEvents()},isSelected:function(b){if("undefined"===typeof b||null===b)return!1;b.element||(b=this.row(b));return b.id in this.selection?!!this.selection[b.id]:this.allSelected&&(!b.data||this.allowSelect(b))},refresh:function(){this.deselectOnRefresh&&this.clearSelection();this._lastSelected=null;return this.inherited(arguments)},renderArray:function(){var b=this.inherited(arguments),a=this.selection,c,e,g;for(c=0;c<b.length;c++)e=this.row(b[c]),(g=e.id in
a?a[e.id]:this.allSelected)&&this.select(e,null,g,null,"renderArray");this._fireSelectionEvents();return b}})})},"dgrid/OnDemandList":function(){define("./List ./_StoreMixin dojo/_base/declare dojo/_base/lang dojo/dom-construct dojo/on dojo/when ./util/misc".split(" "),function(t,n,r,q,d,p,m,l){return r([t,n],{minRowsPerPage:2500,maxRowsPerPage:250,maxEmptySpace:Infinity,bufferRows:10,farOffRemoval:2E3,queryRowsOverlap:0,pagingMethod:"debounce",pagingDelay:l.defaultDelay,keepScrollPosition:!1,rowHeight:0,
postCreate:function(){this.inherited(arguments);var d=this;p(this.bodyNode,"scroll",l[this.pagingMethod](function(a){d._processScroll(a)},null,this.pagingDelay))},destroy:function(){this.inherited(arguments);this._refreshTimeout&&clearTimeout(this._refreshTimeout)},renderQuery:function(h,a){var c=this,g=a&&a.container||this.contentNode,e={query:h,count:0},k,b=this.preload,f={node:d.create("div",{className:"dgrid-preload",style:{height:"0"}},g),count:0,query:h,next:e};f.node.rowIndex=0;e.node=k=d.create("div",
{className:"dgrid-preload"},g);e.previous=f;k.rowIndex=this.minRowsPerPage;b?((e.next=b.next)&&k.offsetTop>=b.node.offsetTop?e.previous=b:(e.next=b,e.previous=b.previous),e.previous.next=e,e.next.previous=e):this.preload=e;var u=d.create("div",{className:"dgrid-loading"},k,"before");d.create("div",{className:"dgrid-below"},u).innerHTML=this.loadingMessage;a=q.mixin({start:0,count:this.minRowsPerPage},"level"in h?{queryLevel:h.level}:null);return this._trackError(function(){var b=h(a);return c.renderQueryResults(b,
k,a).then(function(f){return b.totalLength.then(function(b){var g=f.length,h=k.parentNode,p=c.noDataNode;c._rows&&(c._rows.min=0,c._rows.max=g===b?Infinity:g-1);d.destroy(u);"queryLevel"in a||(c._total=b);0===b&&h&&(p&&(d.destroy(p),delete c.noDataNode),c.noDataNode=p=d.create("div",{className:"dgrid-no-data",innerHTML:c.noDataMessage}),c._emit("noData"),h.insertBefore(p,c._getFirstRowSibling(h)));for(p=h=0;p<g;p++)h+=c._calcRowHeight(f[p]);g&&h&&(c.rowHeight=h/g);b-=g;e.count=b;k.rowIndex=g;b?k.style.height=
Math.min(b*c.rowHeight,c.maxEmptySpace)+"px":k.style.display="none";c._previousScrollPosition&&(c.scrollTo(c._previousScrollPosition),delete c._previousScrollPosition);return m(c._processScroll()).then(function(){return f})})}).otherwise(function(b){d.destroy(u);throw b;})})},refresh:function(d){var a=this,c=d&&d.keepScrollPosition;"undefined"===typeof c&&(c=this.keepScrollPosition);c&&(this._previousScrollPosition=this.getScrollPosition());this.inherited(arguments);if(this._renderedCollection)return this.renderQuery(function(c){return a._renderedCollection.fetchRange({start:c.start,
end:c.start+c.count})}).then(function(){a._refreshTimeout=setTimeout(function(){p.emit(a.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:a});a._refreshTimeout=null},0)})},resize:function(){this.inherited(arguments);this._processScroll()},cleanup:function(){this.inherited(arguments);this.preload=null},renderQueryResults:function(d){var a=this.inherited(arguments),c=this._renderedCollection;c&&c.releaseRange&&a.then(function(a){a[0]&&!a[0].parentNode.tagName&&d.totalLength.then(function(){c.releaseRange(a[0].rowIndex,
a[a.length-1].rowIndex+1)})});return a},_getFirstRowSibling:function(d){return d.lastChild},_calcRowHeight:function(d){var a=d.nextSibling;return a&&!/\bdgrid-preload\b/.test(a.className)?a.offsetTop-d.offsetTop:d.offsetHeight},lastScrollTop:0,_processScroll:function(h){function a(b,a,f,g){var k=e.farOffRemoval,u=b.node;if(a>2*k){for(var h,m=u[f],p=0,l=0,y=[],v=m&&m.rowIndex,n;h=m;){var q=e._calcRowHeight(h);if(p+q+k>a||0>m.className.indexOf("dgrid-row")&&0>m.className.indexOf("dgrid-loading"))break;
m=h[f];p+=q;l+=h.count||1;e.removeRow(h,!0);y.push(h);"rowIndex"in h&&(n=h.rowIndex)}e._renderedCollection.releaseRange&&"number"===typeof v&&"number"===typeof n&&(g?e._renderedCollection.releaseRange(n,v+1):e._renderedCollection.releaseRange(v,n+1),e._rows[g?"max":"min"]=n,e._rows.max>=e._total-1&&(e._rows.max=Infinity));b.count+=l;g?(u.rowIndex-=l,c(b)):u.style.height=u.offsetHeight+p+"px";var r=document.createElement("div");for(b=y.length;b--;)r.appendChild(y[b]);setTimeout(function(){d.destroy(r)},
1)}}function c(b,a){b.node.style.height=Math.min(b.count*e.rowHeight,a?Infinity:e.maxEmptySpace)+"px"}function g(b,a){do b=a?b.next:b.previous;while(b&&!b.node.offsetWidth);return b}if(this.rowHeight){var e=this,k=e.bodyNode;h=h&&h.scrollTop||this.getScrollPosition().y;var k=k.offsetHeight+h,b,f,u=e.preload,p=e.lastScrollTop,m=e.bufferRows*e.rowHeight,l=m-e.rowHeight,n,r=!0;for(e.lastScrollTop=h;u&&!u.node.offsetWidth;)u=u.previous;for(;u&&u!==b;){b=e.preload;e.preload=u;f=u.node;var v=f.offsetTop;
if(k+1+l<v)u=g(u,r=!1);else if(h-1-l>v+f.offsetHeight)u=g(u,r=!0);else{var v=((f.rowIndex?h-m:k)-v)/e.rowHeight,q=(k-h+2*m)/e.rowHeight,w=Math.max(Math.min((h-p)*e.rowHeight,e.maxRowsPerPage/2),e.maxRowsPerPage/-2),q=q+Math.min(Math.abs(w),10);0===f.rowIndex&&(v-=q);v=Math.max(v,0);10>v&&0<v&&q+v<e.maxRowsPerPage&&(q+=Math.max(0,v),v=0);q=Math.min(Math.max(q,e.minRowsPerPage),e.maxRowsPerPage,u.count);if(0===q)u=g(u,r);else{var q=Math.ceil(q),v=Math.min(Math.floor(v),u.count-q),t={};u.count-=q;var x=
f,E,w=e.queryRowsOverlap,F=(0<f.rowIndex||f.offsetTop>h)&&u;if(F){var z=u.previous;z&&(a(z,h-(z.node.offsetTop+z.node.offsetHeight),"nextSibling"),0<v&&z.node===f.previousSibling?(v=Math.min(u.count,v),u.previous.count+=v,c(u.previous,!0),f.rowIndex+=v,w=0):q+=v,u.count-=v);t.start=f.rowIndex-w;t.count=Math.min(q+w,e.maxRowsPerPage);f.rowIndex=t.start+t.count}else u.next&&(a(u.next,u.next.node.offsetTop-k,"previousSibling",!0),x=f.nextSibling,x===u.next.node?(u.next.count+=u.count-v,u.next.node.rowIndex=
v+q,c(u.next),u.count=v,w=0):E=!0),t.start=u.count,t.count=Math.min(q+w,e.maxRowsPerPage);E&&x&&x.offsetWidth&&(E=x.offsetTop);c(u);"level"in u.query&&(t.queryLevel=u.query.level);if("queryLevel"in t||!(t.start>e._total||0>t.count)){var A=d.create("div",{className:"dgrid-loading",style:{height:q*e.rowHeight+"px"}},x,"before");d.create("div",{className:"dgrid-"+(F?"below":"above"),innerHTML:e.loadingMessage},A);A.count=q;e._trackError(function(){(function(b,a,f){var g=u.query(t);n=e.renderQueryResults(g,
b,t).then(function(k){var u=e._rows;!u||"queryLevel"in t||!k.length||(a?(u.max<=u.min&&(u.min=k[0].rowIndex),u.max=k[k.length-1].rowIndex):(u.max<=u.min&&(u.max=k[k.length-1].rowIndex),u.min=k[0].rowIndex));x=b.nextSibling;d.destroy(b);f&&x&&x.offsetWidth&&(u=e.getScrollPosition(),e.scrollTo({x:u.x,y:u.y+x.offsetTop-f,preserveMomentum:!0}));g.totalLength.then(function(b){"queryLevel"in t||(e._total=b,e._rows&&e._rows.max>=e._total-1&&(e._rows.max=Infinity));a&&(a.count=b-a.node.rowIndex,c(a))});e._processScroll();
return k},function(a){d.destroy(b);throw a;})})(A,F,E)});u=u.previous}}}}return n}}})})},"dgrid/_StoreMixin":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/aspect dojo/dom-construct dojo/has dojo/on dojo/when".split(" "),function(t,n,r,q,d,p,m,l){function h(a){if("object"!==typeof a)a=Error(a);else if("cancel"===a.dojoType)return;m.emit(this.domNode,"dgrid-error",{grid:this,error:a,cancelable:!0,bubbles:!0})&&console.error(a)}return t(null,{collection:null,_renderedCollection:null,
_rows:null,_observerHandle:null,shouldTrackCollection:!1,getBeforePut:!0,noDataMessage:"",loadingMessage:"",_total:0,constructor:function(){this.dirty={};this._updating={};this._columnsWithSet={};q.before(this,"configStructure",n.hitch(this,function(){this._columnsWithSet={}}))},destroy:function(){this.inherited(arguments);this._renderedCollection&&this._cleanupCollection()},_configColumn:function(a){a.set&&(this._columnsWithSet[a.field]=a);this.inherited(arguments)},_setCollection:function(a){this._renderedCollection&&
(this.cleanup(),this._cleanupCollection({shouldRevert:!a||a.storage!==this._renderedCollection.storage}));this.collection=a;if(this._started){if(a){var c=a;this.sort&&0<this.sort.length&&(c=a.sort(this.sort));c.track&&this.shouldTrackCollection&&(c=c.track(),this._rows=[],this._observerHandle=this._observeCollection(c,this.contentNode,{rows:this._rows}));this._renderedCollection=c}this.refresh()}},_setStore:function(){},_getTotal:function(){return this._total},_cleanupCollection:function(a){a=a||
{};this._renderedCollection.tracking&&this._renderedCollection.tracking.remove();this._observerHandle&&(this._observerHandle.remove(),this._observerHandle=this._rows=null);!1!==a.shouldRevert&&(this.dirty={});this._renderedCollection=this.collection=null},_applySort:function(){this.collection&&this.set("collection",this.collection)},row:function(){var a=this.inherited(arguments);a&&a.data&&"undefined"!==typeof a.id&&(this.collection?a.id=this.collection.getIdentity(a.data):console.error("_StoreMixin:have no collection!"));
return a},refresh:function(){var a=this.inherited(arguments);this.collection||(this.noDataNode=d.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage},this.contentNode),this._emit("noData"));return a},refreshCell:function(a){if(!this.collection||!this._createBodyRowCell)return!1;if(a.column){if(a.column&&a.column.selector)return(new r).resolve();this.inherited(arguments);return this.collection.get(a.row.id).then(n.hitch(this,"_refreshCellFromItem",a))}},_refreshCellFromItem:function(a,
c,g){if(a&&a.element){var e=a.element;e.widget&&e.widget.destroyRecursive();d.empty(e);var k=this.dirty&&this.dirty[a.row.id];k&&(c=n.delegate(c,k));this._createBodyRowCell(e,a.column,c,g)}},renderArray:function(){var a=this.inherited(arguments);this.collection||a.length&&this.noDataNode&&d.destroy(this.noDataNode);return a},insertRow:function(a,c,g,e,k){var b=this.collection,f=this.dirty,b=b&&b.getIdentity(a),u;b in f&&!(b in this._updating)&&(u=f[b]);u&&(a=n.delegate(a,u));f=this.inherited(arguments);
k&&k.rows&&(k.rows[e]=f);this.noDataNode&&(d.destroy(this.noDataNode),this.noDataNode=null);return f},updateDirty:function(a,c,g){var e=this.dirty,k=e[a];k||(k=e[a]={});k[c]=g},save:function(){function a(a,f){return function(k){var d=c._columnsWithSet,u=c._updating,h,m;if("function"===typeof k.set)k.set(f);else for(h in f)k[h]=f[h];for(h in d)m=d[h].set(k),void 0!==m&&(k[h]=m);u[a]=!0;return g.put(k).then(function(f){delete e[a];delete u[a];b[a]=f;return b})}}var c=this,g=this.collection,e=this.dirty,
k=new r,b={},f=function(b){var a;return c.getBeforePut||!(a=c.row(b).data)?function(){return g.get(b)}:function(){return a}},d=k.then(function(){return b}),h;for(h in e)var m=a(h,e[h]),d=d.then(f(h)).then(m);k.resolve();return d},revert:function(){this.dirty={};this.refresh()},_trackError:function(a){"string"===typeof a&&(a=n.hitch(this,a));var c=this,g;try{g=l(a())}catch(e){a=new r,a.reject(e),g=a.promise}g.otherwise(function(a){h.call(c,a)});return g},removeRow:function(a,c,g){var e={element:a};
!c&&this.noDataMessage&&this.up(e).element===a&&this.down(e).element===a&&(this.noDataNode=d.create("div",{className:"dgrid-no-data",innerHTML:this.noDataMessage},this.contentNode),this._emit("noData"));(e=g&&g.rows||this._rows)&&delete e[a.rowIndex];return this.inherited(arguments)},renderQueryResults:function(a,c,g){g=n.mixin({rows:this._rows},g);var e=this;return a.then(function(a){a=e.renderArray(a,c,g);delete e._lastCollection;return a})},_observeCollection:function(a,c,g){var e=this,k=g.rows,
b,f=[a.on("delete, update",function(a){var f=a.previousIndex,d=a.index;void 0!==f&&k[f]&&("max"in k&&(void 0===d||d<k.min||d>k.max)&&k.max--,b=k[f],b.parentNode===c&&e.removeRow(b,!1,g),k.splice(f,1),("delete"===a.type||"update"===a.type&&(f<d||void 0===d))&&k[f]&&k[f].rowIndex--);"delete"===a.type&&(b=null)}),a.on("add, update",function(a){var f=a.previousIndex,d=a.index;if(void 0!==d&&(!("max"in k)||d>=k.min&&d<=k.max)){"max"in k&&(void 0===f||f<k.min||f>k.max)&&k.max++;if(k.length){if(f=k[d],!f&&
(f=k[d-1]))f=(f.connected||f).nextSibling}else f=e._getFirstRowSibling&&e._getFirstRowSibling(c);b&&f&&b.id===f.id&&(f=(f.connected||f).nextSibling);f&&!f.parentNode&&(f=document.getElementById(f.id));k.splice(d,0,void 0);b=e.insertRow(a.target,c,f,d,g);e.highlightRow(b)}b=null}),a.on("add, delete, update",function(b){var f="undefined"!==typeof b.previousIndex?b.previousIndex:Infinity,c="undefined"!==typeof b.index?b.index:Infinity,g=Math.min(f,c);f!==c&&k[g]&&e.adjustRowIndices(k[g]);Infinity!==
f&&e._processScroll&&(k[f]||k[f-1])&&e._processScroll();e._onNotification(k,b,a);a===e._renderedCollection&&"totalLength"in b&&(e._total=b.totalLength)})];return{remove:function(){for(;0<f.length;)f.pop().remove()}}},_onNotification:function(){}})})},"dgrid/OnDemandGrid":function(){define(["dojo/_base/declare","./Grid","./OnDemandList"],function(t,n,r){return t([n,r],{})})},"dgrid/extensions/ColumnReorder":function(){define("dojo/_base/lang dojo/_base/declare dojo/_base/array dojo/dom-class dojo/on dojo/query dojo/dnd/Source".split(" "),
function(t,n,r,q,d,p){function m(a,g){var e=g[2],k=a[e?"columnSets":"subRows"][g[1]];return e?k[g[2]]:k}function l(a,g,e){g[2]?a.columnSets[g[1]][g[2]]=e:a.subRows[g[1]]=e}function h(a,g){return g.slice(("dgrid-"+a+"-").length)}var a=/(\d+)(?:-(\d+))?$/;t=n(p,{copyState:function(){return!1},checkAcceptance:function(a){return a===this},_legalMouseDown:function(a){return-1<a.target.className.indexOf("dgrid-resize-handle")?!1:this.inherited(arguments)},onDropInternal:function(c){var g=this.grid,e=a.exec(h(g.id,
c[0].getAttribute("dndType"))),k=e[2]?"columnSets":"subRows",b=m(g,e),f=g.columns;this.inherited(arguments);e&&setTimeout(function(){var a=r.map(c[0].parentNode.childNodes,function(b){return f[b.columnId]});l(g,e,a);a={grid:g,subRow:a,column:f[c[0].columnId],bubbles:!0,cancelable:!0,parentType:"dnd"};a[k]=g[k];d.emit(g.domNode,"dgrid-columnreorder",a)?g.set(k,g[k]):(l(g,e,b),g.renderHeader(),g.sort.length&&g.updateSortArrow(g.sort))},0)}});n=n("dgrid.ColumnReorder",null,{columnDndConstructor:t,_initSubRowDnd:function(a,
g){var e,k,b,f;k=0;for(b=a.length;k<b;k++)f=a[k],!1!==f.reorderable&&(f=f.headerNode,q.add(f,"dojoDndItem"),f.setAttribute("dndType",g),e||(e=f.parentNode));e&&this._columnDndSources.push(new this.columnDndConstructor(e,{horizontal:!0,grid:this}))},renderHeader:function(){var a="dgrid-"+this.id+"-",g,e;this.inherited(arguments);this._columnDndSources=[];if(this.columnSets)for(e=0,g=this.columnSets.length;e<g;e++)r.forEach(this.columnSets[e],function(g,b){this._initSubRowDnd(g,a+e+"-"+b)},this);else r.forEach(this.subRows,
function(e,b){this._initSubRowDnd(e,a+b)},this)},_destroyColumns:function(){this._columnDndSources&&r.forEach(this._columnDndSources,function(a){a&&a.destroy&&a.destroy()});this.inherited(arguments)}});n.ColumnDndSource=t;return n})},"dgrid/extensions/ColumnResizer":function(){define("dojo/_base/declare dojo/on dojo/query dojo/_base/lang dojo/dom dojo/dom-construct dojo/dom-geometry dojo/has ../util/misc dojo/_base/html".split(" "),function(t,n,r,q,d,p,m,l,h){function a(b){for(var a=b.length,c=a,
e=b[0].length,g=Array(a);a--;)g[a]=Array(e);for(var k={},a=0;a<c;a++)for(var d=g[a],h=b[a],m=0,p=0;m<e;m++){var l=h[p],n;if("undefined"===typeof d[m]){d[m]=l.id;if(l.rowSpan&&1<l.rowSpan){n=g;for(var q=l.rowSpan,r=a,t=m,z=l.id,A=1;A<q;A++)n[r+A][t]=z}if(0<a&&l.colSpan&&1<l.colSpan)for(n=1;n<l.colSpan;n++)if(d[++m]=l.id,l.rowSpan&&1<l.rowSpan)for(var q=g,r=l.rowSpan,t=a,z=m,A=l.id,G=1;G<r;G++)q[t+G][z]=A;k[l.id]=b[0][m].id;p++}}return k}function c(b,a,c,e,g){if(!(0>=c)){var k=b.columns[a],d;if(k&&
(d={grid:b,columnId:a,width:c,bubbles:!0,cancelable:!0},e&&(d.parentType=e),!b._resizedColumns||n.emit(b.headerNode,"dgrid-columnresize",d)))return"auto"===c?delete k.width:(k.width=c,c+="px"),(e=b._columnSizes[a])?e.set("width",c):e=h.addCssRule("#"+h.escapeCssIdentifier(b.domNode.id)+" .dgrid-column-"+h.escapeCssIdentifier(a,"-"),"width: "+c+";"),b._columnSizes[a]=e,!1!==g&&b.resize(),!0}}var g,e=0,k={create:function(){g=p.create("div",{className:"dgrid-column-resizer"})},destroy:function(){p.destroy(g);
g=null},show:function(b){b=m.position(b.domNode,!0);g.style.top=b.y+"px";g.style.height=b.h+"px";document.body.appendChild(g)},move:function(b){g.style.left=b+"px"},hide:function(){g.parentNode.removeChild(g)}};return t("dgrid.ColumnResizer",null,{resizeNode:null,minWidth:40,adjustLastColumn:!0,_resizedColumns:!1,buildRendering:function(){this.inherited(arguments);e||k.create();e++},destroy:function(){this.inherited(arguments);for(var b in this._columnSizes)this._columnSizes[b].remove();--e||k.destroy()},
resizeColumnWidth:function(b,a){return c(this,b,a)},configStructure:function(){var b=this._oldColumnSizes=q.mixin({},this._columnSizes),a;this._resizedColumns=!1;this._columnSizes={};this.inherited(arguments);for(a in b)a in this._columnSizes||b[a].remove();delete this._oldColumnSizes},_configColumn:function(b){this.inherited(arguments);var a=b.id,c;"width"in b&&((c=this._oldColumnSizes[a])?c.set("width",b.width+"px"):c=h.addCssRule("#"+h.escapeCssIdentifier(this.domNode.id)+" .dgrid-column-"+h.escapeCssIdentifier(a,
"-"),"width: "+b.width+"px;"),this._columnSizes[a]=c)},renderHeader:function(){this.inherited(arguments);var b=this,f;if(this.columnSets&&this.columnSets.length)for(var c=this.columnSets.length;c--;)f=q.mixin(f||{},a(this.columnSets[c]));else this.subRows&&1<this.subRows.length&&(f=a(this.subRows));for(var c=r(".dgrid-cell",b.headerNode),e=c.length;e--;){var g=c[e],k=g.columnId,d=b.columns[k],m=g.childNodes;if(d&&!1!==d.resizable){d=p.create("div",{className:"dgrid-resize-header-container"});for(g.contents=
d;0<m.length;)d.appendChild(m[0]);m=p.create("div",{className:"dgrid-resize-handle resizeNode-"+h.escapeCssIdentifier(k,"-")},d);g.appendChild(d);m.columnId=f&&f[k]||k}}b.mouseMoveListen||(n(b.headerNode,".dgrid-resize-handle:mousedown"+(l("touch")?",.dgrid-resize-handle:touchstart":""),function(a){b._resizeMouseDown(a,this);b.mouseMoveListen.resume();b.mouseUpListen.resume()}),b._listeners.push(b.mouseMoveListen=n.pausable(document,"mousemove"+(l("touch")?",touchmove":""),h.throttleDelayed(function(a){b._updateResizerPosition(a)}))),
b._listeners.push(b.mouseUpListen=n.pausable(document,"mouseup"+(l("touch")?",touchend":""),function(a){b._resizeMouseUp(a);b.mouseMoveListen.pause();b.mouseUpListen.pause()})),b.mouseMoveListen.pause(),b.mouseUpListen.pause())},_resizeMouseDown:function(a,f){a.preventDefault();d.setSelectable(this.domNode,!1);this._startX=this._getResizeMouseLocation(a);this._targetCell=r(".dgrid-column-"+h.escapeCssIdentifier(f.columnId,"-"),this.headerNode)[0];this._updateResizerPosition(a);k.show(this)},_resizeMouseUp:function(a){var f=
this._columnSizes,e,g,m;this.adjustLastColumn&&(m=this.headerNode.clientWidth-1);this._resizedColumns||(e=r(".dgrid-cell",this.headerNode),this.columnSets&&this.columnSets.length?e=e.filter(function(a){return"0"===a.columnId.split("-")[0]&&!(a.columnId in f)}):this.subRows&&1<this.subRows.length&&(e=e.filter(function(a){return"0"===a.columnId.charAt(0)&&!(a.columnId in f)})),g=e.map(function(a){return a.offsetWidth}),e.forEach(function(a,b){c(this,a.columnId,g[b],null,!1)},this),this._resizedColumns=
!0);d.setSelectable(this.domNode,!0);e=this._targetCell;var p=this._getResizeMouseLocation(a)-this._startX,l=e.offsetWidth+p,n=this._getResizedColumnWidths(),q=n.totalWidth,n=n.lastColId,t=r(".dgrid-column-"+h.escapeCssIdentifier(n,"-"),this.headerNode)[0].offsetWidth;l<this.minWidth&&(l=this.minWidth);c(this,e.columnId,l,a.type)&&e.columnId!==n&&this.adjustLastColumn&&(q+p<m?c(this,n,"auto",a.type):t-p<=this.minWidth&&c(this,n,this.minWidth,a.type));k.hide();delete this._startX;delete this._targetCell},
_updateResizerPosition:function(a){if(this._targetCell){a=this._getResizeMouseLocation(a);var f=this._targetCell.offsetWidth,c=a;f+(a-this._startX)<this.minWidth&&(c=this._startX-(f-this.minWidth));k.move(c)}},_getResizeMouseLocation:function(a){var f=0;a.pageX?f=a.pageX:a.clientX&&(f=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft);return f},_getResizedColumnWidths:function(){var a=0,f=r((this.columnSets?".dgrid-column-set-cell ":"")+"tr:first-child .dgrid-cell",this.headerNode),
c=f.length;if(!c)return{};for(var e=f[c-1].columnId;c--;)a+=f[c].offsetWidth;return{totalWidth:a,lastColId:e}}})})},"dgrid/extensions/CompoundColumns":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/sniff","dojo/query","../util/misc"],function(t,n,r,q,d){return n(null,{configStructure:function(){function p(b,f,c,e){var g=0,k=function(){},m,n;d.each(b,function(d,q){"string"===typeof d&&(d={label:d});b instanceof Array||d.field||(d.field=q);n=(m=d.children)&&!1!==d.showChildHeaders;
d.parentColumn=e;m?null==d.id?d.id=(e&&e.id||f-1)+"-"+h.length:e&&e.id&&(d.id=e.id+"-"+d.id):(a.push(d),h.push(t.delegate(d,{renderHeaderCell:k})),g++);n||(d=t.delegate(d,{rowSpan:-f}));m&&(g+=d.colSpan=p(m,f+1,n,d));c&&(l[f]||(l[f]=[])).push(d)},this);return g}var m=this.subRows&&this.subRows[0]||this.columns,l=[[]],h=l[0],a=[];l[0].className="dgrid-spacer-row";p(m,1,!0);var m=l.length,c,g,e,k;for(c=0;c<m;c++)for(e=l[c],g=0;g<e.length;g++)k=e[g],1>k.rowSpan&&(k.rowSpan+=m);a=[a];a.headerRows=l;this.subRows=
a;this.inherited(arguments)},renderHeader:function(){var d,m=this.subRows[0],l=this.subRows.headerRows[0];this.inherited(arguments);for(d=m.length;d--;)m[d].headerNode=l[d].headerNode},_findSortArrowParent:function(){var p=this.inherited(arguments);if(p&&d.contains(q(".dgrid-spacer-row",this.headerNode)[0],p))return p=p.columnId||p.parentNode.columnId,p=q(".dgrid-column-"+p,this.headerNode),p[p.length-1]},_configColumn:function(d,m,l){var h=d.parentColumn,a=d.id;h&&(a=0===a.indexOf(l)?a.substring(l.length):
a,l=h.id+"-",d.id=l+a);this.inherited(arguments,[d,m,l])},cell:function(d,m){if("object"!==typeof m){var l=this.column(m);l&&(m=l.id)}return this.inherited(arguments,[d,m])},column:function(d){var m=this.inherited(arguments);if(null==m&&"object"!==typeof d){var l="-"+d,h=l.length,a;for(a in this.columns)if(-1!==a.indexOf(l,a.length-h))return this.columns[a]}return m},_updateCompoundHiddenStates:function(d,m){var l=this.columns[d],h;if(!l||l.hidden!==m)for(;l&&l.parentColumn;){l=l.parentColumn;if(h=
l.colSpan+=m?-1:1)l.headerNode.colSpan=h;1!==h||m?!h&&m&&this._hideColumn(l.id):this._showColumn(l.id)}},_hideColumn:function(d){var m=this;this._updateCompoundHiddenStates(d,!0);this.inherited(arguments);r("ff")&&(this.headerNode.style.display="none",setTimeout(function(){m.headerNode.style.display="";m.resize()},0))},_showColumn:function(d){this._updateCompoundHiddenStates(d,!1);this.inherited(arguments)},_getResizedColumnWidths:function(){var d=0,m=this.columns,l;for(l in m)d+=m[l].headerNode.offsetWidth;
return{totalWidth:d,lastColId:this.subRows[0][this.subRows[0].length-1].id}}})})},"dgrid/extensions/Pagination":function(){define("../_StoreMixin dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/dom-construct dojo/dom-class dojo/on dojo/query dojo/string dojo/has dojo/when ../util/misc dojo/_base/sniff".split(" "),function(t,n,r,q,d,p,m,l,h,a,c,g){function e(a){a.noDataNode?(d.destroy(a.noDataNode),delete a.noDataNode):a.cleanup();a.contentNode.innerHTML=""}function k(a){if(a.loadingNode)d.destroy(a.loadingNode),
delete a.loadingNode;else if(a._oldPageNodes){for(var f in a._oldPageNodes)a.removeRow(a._oldPageNodes[f]);delete a._oldPageNodes}delete a._isLoading}return n(t,{rowsPerPage:10,pagingTextBox:!1,previousNextArrows:!0,firstLastArrows:!1,pagingLinks:2,pageSizeOptions:null,showLoadingMessage:!0,i18nPagination:{status:"${start} - ${end} of ${total} results",gotoFirst:"Go to first page",gotoNext:"Go to next page",gotoPrev:"Go to previous page",gotoLast:"Go to last page",gotoPage:"Go to page",jumpPage:"Jump to page",
rowsPerPage:"Number of rows per page"},showFooter:!0,_currentPage:1,buildRendering:function(){this.inherited(arguments);var a=this,f=this.paginationNode=d.create("div",{className:"dgrid-pagination"},this.footerNode),c=this.paginationStatusNode=d.create("div",{className:"dgrid-status"},f),e=this.i18nPagination;c.tabIndex=0;this.addUiClasses&&p.add(this.footerNode,"ui-widget-content");this._updatePaginationSizeSelect();this._updateRowsPerPageOption();this._updatePaginationStatus(this._total);f=this.paginationNavigationNode=
d.create("div",{className:"dgrid-navigation"},f);this.firstLastArrows&&(this.paginationFirstNode=d.create("span",{"aria-label":e.gotoFirst,className:"dgrid-first dgrid-page-link",innerHTML:"\u00ab",tabIndex:0},f));this.previousNextArrows&&(this.paginationPreviousNode=d.create("span",{"aria-label":e.gotoPrev,className:"dgrid-previous dgrid-page-link",innerHTML:"\u2039",tabIndex:0},f));this.paginationLinksNode=d.create("span",{className:"dgrid-pagination-links"},f);this.previousNextArrows&&(this.paginationNextNode=
d.create("span",{"aria-label":e.gotoNext,className:"dgrid-next dgrid-page-link",innerHTML:"\u203a",tabIndex:0},f));this.firstLastArrows&&(this.paginationLastNode=d.create("span",{"aria-label":e.gotoLast,className:"dgrid-last dgrid-page-link",innerHTML:"\u00bb",tabIndex:0},f));this._listeners.push(m(f,".dgrid-page-link:click,.dgrid-page-link:keydown",function(f){if("keydown"!==f.type||13===f.keyCode){f=this.className;var c,e;a._isLoading||-1<f.indexOf("dgrid-page-disabled")||(c=a._currentPage,e=Math.ceil(a._total/
a.rowsPerPage),this===a.paginationPreviousNode?a.gotoPage(c-1):this===a.paginationNextNode?a.gotoPage(c+1):this===a.paginationFirstNode?a.gotoPage(1):this===a.paginationLastNode?a.gotoPage(e):"dgrid-page-link"===f&&a.gotoPage(+this.innerHTML))}}))},destroy:function(){this.inherited(arguments);this._pagingTextBoxHandle&&this._pagingTextBoxHandle.remove()},_updatePaginationSizeSelect:function(){var a=this.pageSizeOptions,f=this.paginationSizeSelect,c;if(a&&a.length){f||(f=this.paginationSizeSelect=
d.create("select",{"aria-label":this.i18nPagination.rowsPerPage,className:"dgrid-page-size"},this.paginationNode),c=this._paginationSizeChangeHandle=m(f,"change",q.hitch(this,function(){this.set("rowsPerPage",+this.paginationSizeSelect.value)})),this._listeners.push(c));for(c=f.options.length=0;c<a.length;c++)d.create("option",{innerHTML:a[c],selected:this.rowsPerPage===a[c],value:a[c]},f);this._updateRowsPerPageOption()}else a&&a.length||!f||(d.destroy(f),this.paginationSizeSelect=null,this._paginationSizeChangeHandle.remove())},
_setPageSizeOptions:function(a){this.pageSizeOptions=a&&a.sort(function(a,b){return a-b});this._updatePaginationSizeSelect()},_updateRowsPerPageOption:function(){var a=this.rowsPerPage,c=this.pageSizeOptions,e=this.paginationSizeSelect;e&&(0>r.indexOf(c,a)?this._setPageSizeOptions(c.concat([a])):e.value=""+a)},_setRowsPerPage:function(a){this.rowsPerPage=a;this._updateRowsPerPageOption();this.gotoPage(1)},_updateNavigation:function(a){function c(a,b){var f,e;h.pagingTextBox&&a===r&&1<w?(f=d.create("input",
{"aria-label":n.jumpPage,className:"dgrid-page-input",type:"text",value:r},q),h._pagingTextBoxHandle=m(f,"change",function(){var a=+this.value;!isNaN(a)&&0<a&&a<=w&&h.gotoPage(+this.value)}),B&&"INPUT"===B.tagName&&f.focus()):(e=a===r,f=d.create("span",{"aria-label":n.gotoPage,className:"dgrid-page-link"+(e?" dgrid-page-disabled":""),innerHTML:a+(b?" ":""),tabIndex:e?-1:0},q),x===a&&(e?a<w?x++:E.focus():f.focus()),e||(E=f))}function e(a,b){p.toggle(a,"dgrid-page-disabled",b);a.tabIndex=b?-1:0}function k(){d.create("span",
{className:"dgrid-page-skip",innerHTML:"..."},q)}var h=this,n=this.i18nPagination,q=this.paginationLinksNode,r=this._currentPage,t=this.pagingLinks,C=this.paginationNavigationNode,w=Math.ceil(a/this.rowsPerPage);a=this._pagingTextBoxHandle;var B=document.activeElement,x,E;B&&g.contains(this.paginationNavigationNode,B)?"dgrid-page-link"===B.className&&(x=+B.innerHTML):B=null;a&&a.remove();q.innerHTML="";l(".dgrid-first, .dgrid-previous",C).forEach(function(a){e(a,1===r)});l(".dgrid-last, .dgrid-next",
C).forEach(function(a){e(a,r>=w)});if(t&&0<w){c(1,!0);C=r-t;for(2<C?k():C=2;C<Math.min(r+t+1,w);C++)c(C,!0);r+t+1<w&&k();1<w&&c(w)}else h.pagingTextBox&&c(r);B&&-1===B.tabIndex&&(t=l('[tabindex\x3d"0"]',this.paginationNavigationNode),B===this.paginationPreviousNode||B===this.paginationFirstNode?B=t[0]:t.length&&(B=t[t.length-1]),B&&B.focus())},_updatePaginationStatus:function(a){var c=this.rowsPerPage,e=Math.min(a,(this._currentPage-1)*c+1);this.paginationStatusNode.innerHTML=h.substitute(this.i18nPagination.status,
{start:e,end:Math.min(a,e+c-1),total:a})},refresh:function(a){var c=this,e=a&&a.keepCurrentPage?Math.min(this._currentPage,Math.ceil(this._total/this.rowsPerPage)):1;this.inherited(arguments);return this.gotoPage(e).then(function(a){setTimeout(function(){m.emit(c.domNode,"dgrid-refresh-complete",{bubbles:!0,cancelable:!1,grid:c})},0);return a})},_onNotification:function(a,c,e){a=this.rowsPerPage;var g=this._currentPage*a;"add"===c.type&&c.index<g||"delete"===c.type&&c.previousIndex<g||"update"===
c.type&&Math.floor(c.index/a)!==Math.floor(c.previousIndex/a)?this.gotoPage(Math.min(this._currentPage,Math.ceil(c.totalLength/this.rowsPerPage))):e===this._renderedCollection&&c.totalLength!==this._total&&(this._updatePaginationStatus(c.totalLength),this._updateNavigation(c.totalLength))},renderQueryResults:function(a,c){var e=this,g=this.inherited(arguments);c||(this._topLevelRequest&&(this._topLevelRequest.cancel(),delete this._topLevelRequest),"function"===typeof g.cancel&&(this._topLevelRequest=
g),g.then(function(){e._topLevelRequest&&delete e._topLevelRequest}));return g},insertRow:function(){var a=this._oldPageNodes,c=this.inherited(arguments);a&&c===a[c.id]&&delete a[c.id];return c},gotoPage:function(a){var f=this,g=(this._currentPage-1)*this.rowsPerPage;if(!this._renderedCollection)return c([]);this._renderedCollection.releaseRange&&this._renderedCollection.releaseRange(g,g+this.rowsPerPage);return this._trackError(function(){var c=f.rowsPerPage,g=(a-1)*c,m={start:g,count:c},h,l=f.contentNode,
p,n,u;if(f.showLoadingMessage)e(f),f.loadingNode=d.create("div",{className:"dgrid-loading",innerHTML:f.loadingMessage},l);else for(f._oldPageNodes=p={},l=l.children,n=0,u=l.length;n<u;n++)p[l[n].id]=l[n];f._isLoading=!0;h=f._renderedCollection.fetchRange({start:g,end:g+c});return f.renderQueryResults(h,null,m).then(function(e){k(f);f.scrollTo({y:0});f._rows&&(f._rows.min=g,f._rows.max=g+c-1);h.totalLength.then(function(c){c||(f.noDataNode&&(d.destroy(f.noDataNode),delete f.noDataNode),f.noDataNode=
d.create("div",{className:"dgrid-no-data",innerHTML:f.noDataMessage},f.contentNode));f._total=c;f._currentPage=a;f._rowsOnPage=e.length;f._updatePaginationStatus(c);f._updateNavigation(c)});return h},function(a){k(f);throw a;})})}})})},"dgrid/extensions/DnD":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/aspect dojo/dom-class dojo/on dojo/topic dojo/has dojo/when dojo/dnd/Source dojo/dnd/Manager dojo/_base/NodeList ../Selection dojo/has!touch?../util/touch dojo/has!touch?./_DnD-touch-autoscroll".split(" "),
function(t,n,r,q,d,p,m,l,h,a,c,g,e,k){var b=t(a,{grid:null,getObject:function(a){var b=this.grid;return b.collection.get(a.id.slice(b.id.length+5))},_legalMouseDown:function(a){return this.inherited(arguments)&&a.target!==this.grid.bodyNode},onDrop:function(a,b,c){var e=this,g=this._targetAnchor=this.targetAnchor,d=this.grid,k=d.collection;!this.before&&g&&(g=g.nextSibling);g=g&&d.row(g);h(g&&k.get(g.id),function(g){if(e!==a)e.onDropExternal(a,b,c,g);else e.onDropInternal(b,c,g)})},onDropInternal:function(a,
b,c){var e=this.grid,g=e.collection,d=this,k=d._targetAnchor,m;k&&(m=this.before?k.previousSibling:k.nextSibling);k=e.row(a[0]);(b||m!==a[0]&&(c||!k||e.down(k).element!==a[0]))&&a.forEach(function(a){h(d.getObject(a),function(a){var f=g.getIdentity(a);g[b&&g.copy?"copy":"put"](a,{beforeId:c?g.getIdentity(c):null});d._selectedNodes[f]&&(d._selectedNodes[f]=e.row(f).element)})})},onDropExternal:function(a,b,c,e){var g=this.grid.collection,d=a.grid;b.forEach(function(b,k){h(a.getObject(b),function(m){c||
(d?h(d.collection.getIdentity(m),function(c){!k&&a.selectNone();a.delItem(b.id);d.collection.remove(c)}):a.deleteSelectedNodes());g[g.copy?"copy":"put"](m,{beforeId:e?g.getIdentity(e):null})})})},onDndStart:function(a){this.inherited(arguments);a===this&&(this.grid.cancelTouchScroll&&this.grid.cancelTouchScroll(),c.manager().avatar.node.style.width=this.grid.domNode.offsetWidth/2+"px")},onMouseDown:function(a){l("touch")&&this.isDragging&&1<k.countCurrentTouches(a,this.grid.touchNode)?(m.publish("/dnd/cancel"),
c.manager().stopDrag()):this.inherited(arguments)},onMouseMove:function(a){(!l("touch")||1>=k.countCurrentTouches(a,this.grid.touchNode))&&this.inherited(arguments)},checkAcceptance:function(b){return b.getObject&&a.prototype.checkAcceptance.apply(this,arguments)},getSelectedNodes:function(){if(!this.grid.selection)return this.inherited(arguments);var a=new g,b;for(b in this.grid.selection)a.push(this._selectedNodes[b]);return a}});t=t(e,{dndSourceType:"dgrid-row",dndParams:null,dndConstructor:b,
postMixInProperties:function(){this.inherited(arguments);this.dndParams=n.mixin({accept:[this.dndSourceType]},this.dndParams)},postCreate:function(){function a(b){e[b.id]=b.element}function c(a){delete e[a.id];d.remove(a.element,"dojoDndItemSelected dojoDndItemAnchor")}this.inherited(arguments);this.dndSource=new (this.dndConstructor||b)(this.bodyNode,n.mixin(this.dndParams,{grid:this,dropParent:this.contentNode}));var e=this.dndSource._selectedNodes={};this.on("dgrid-select",function(b){r.forEach(b.rows,
a)});this.on("dgrid-deselect",function(a){r.forEach(a.rows,c)});q.after(this,"destroy",function(){delete this.dndSource._selectedNodes;e=null;this.dndSource.destroy()},!0)},insertRow:function(a){var b=this.inherited(arguments),c="function"===typeof this.getObjectDndType?this.getObjectDndType(a):[this.dndSourceType];d.add(b,"dojoDndItem");this.dndSource.setItem(b.id,{data:a,type:c instanceof Array?c:[c]});return b},removeRow:function(a){this.dndSource.delItem(this.row(a));this.inherited(arguments)}});
t.GridSource=b;return t})},"dgrid/Editor":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred dojo/dom-construct dojo/dom-class dojo/on dojo/has dojo/query ./Grid dojo/_base/sniff".split(" "),function(t,n,r,q,d,p,m,l,h){return t(null,{constructor:function(){this._editorInstances={};this._editorColumnListeners=[];this._editorCellListeners={};this._editorsPendingStartup=[]},postCreate:function(){var a=this;this.inherited(arguments);this.on(".dgrid-input:focusin",function(){a._focusedEditorCell=
a.cell(this)});this._editorFocusoutHandle=p.pausable(this.domNode,".dgrid-input:focusout",function(){a._focusedEditorCell=null});this._listeners.push(this._editorFocusoutHandle)},insertRow:function(){this._editorRowListeners={};var a=this.inherited(arguments),c=this.row(a),g=this._editorCellListeners[a.id]=this._editorCellListeners[a.id]||{},e;for(e in this._editorRowListeners)g[e]=this._editorRowListeners[e];this._editorRowListeners=null;(g=this._previouslyFocusedEditorCell)&&g.row.id===c.id&&this.edit(this.cell(c,
g.column.id));return a},refresh:function(){for(var a in this._editorInstances){var c=this._editorInstances[a].domNode;c&&c.parentNode&&c.parentNode.removeChild(c)}this.inherited(arguments)},removeRow:function(a){var c=this,g=this._focusedEditorCell;g&&g.row.id===this.row(a).id&&(this._previouslyFocusedEditorCell=g,this._editorFocusoutHandle.pause(),setTimeout(function(){c._editorFocusoutHandle.resume();c._previouslyFocusedEditorCell=null},0));if(this._editorCellListeners[a.id]){for(var e in this._editorCellListeners[a.id])this._editorCellListeners[a.id][e].remove();
delete this._editorCellListeners[a.id]}for(g=this._alwaysOnWidgetColumns.length;g--;)if(e=(e=this.cell(a,this._alwaysOnWidgetColumns[g].id).element)&&(e.contents||e).widget)this._editorFocusoutHandle.pause(),e.destroyRecursive();return this.inherited(arguments)},renderArray:function(){var a=this.inherited(arguments);a.length?this._startupPendingEditors():this._editorsPendingStartup=[];return a},_onNotification:function(){this.inherited(arguments);this._startupPendingEditors()},_destroyColumns:function(){this._editorStructureCleanup();
this.inherited(arguments)},_editorStructureCleanup:function(){var a=this._editorInstances,c=this._editorColumnListeners;this._editTimer&&clearTimeout(this._editTimer);for(var g in a){var e=a[g];e.domNode&&e.destroyRecursive()}this._editorInstances={};for(a=c.length;a--;)c[a].remove();for(var d in this._editorCellListeners)for(g in this._editorCellListeners[d])this._editorCellListeners[d][g].remove();for(a=0;a<this._editorColumnListeners.length;a++)this._editorColumnListeners[a].remove();this._editorCellListeners=
{};this._editorColumnListeners=[];this._editorsPendingStartup=[]},_configColumns:function(){var a=this.inherited(arguments);this._alwaysOnWidgetColumns=[];for(var c=0,g=a.length;c<g;c++)a[c].editor&&this._configureEditorColumn(a[c]);return a},_configureEditorColumn:function(a){var c=this,g=a.renderCell||this._defaultRenderCell,e=a.editOn,d="string"!==typeof a.editor;e?this._editorInstances[a.id]=this._createSharedEditor(a,g):d&&this._alwaysOnWidgetColumns.push(a);a.renderCell=e?function(b,f,d,k){if(!k||
!k.alreadyHooked){var m=p(d,e,function(){c._activeOptions=k;c.edit(this)});if(c._editorRowListeners)c._editorRowListeners[a.id]=m;else{var h=c.row(b);c._editorCellListeners[h.element.id][a.id]=m}}return g.call(a,b,f,d,k)}:function(b,e,m,h){if(!a.canEdit||a.canEdit(b,e))h=c._createEditor(a),h.object=b,c._showEditor(h,a,m,e),m[d?"widget":"input"]=h;else return g.call(a,b,e,m,h)}},edit:function(a){function c(a){g._activeCell=d;g._showEditor(h,e,d,m);g._editTimer=setTimeout(function(){h.focus&&h.focus();
e._editorBlurHandle&&e._editorBlurHandle.resume();g._editTimer=null;a.resolve(h)},0)}var g=this,e,d,b,f,m,h,l;a.column||(a=this.cell(a));if(!a||!a.element)return null;e=a.column;f=e.field;d=a.element.contents||a.element;if(h=this._editorInstances[e.id]){if(this._activeCell!==d){var p=a.row;m=(b=this.dirty&&this.dirty[p.id])&&f in b?b[f]:e.get?e.get(p.data):p.data[f];if(!e.canEdit||e.canEdit(a.row.data,m))return l=new r,a=h.domNode||h,a.offsetWidth?(a.blur(),setTimeout(function(){c(l)},0)):c(l),l.promise}}else if(e.editor&&
(h=d.widget||d.input))return l=new r,h.focus&&h.focus(),l.resolve(h),l.promise;return null},refreshCell:function(a){var c=a.row.element.id,g=a.column.id;this._editorCellListeners[c]&&this._editorCellListeners[c][g]&&(this._editorCellListeners[c][g].remove(),this._editorCellListeners[c][g]=null);return this.inherited(arguments)},_showEditor:function(a,c,g,e){var k=a.domNode;k||this._updateInputValue(a,e);g.innerHTML="";d.add(g,"dgrid-cell-editing");k&&c.editOn&&a.validate&&a.reset&&a.reset();g.appendChild(a.domNode||
a);k&&!c.editOn?this._editorsPendingStartup.push([a,c,g,e]):this._startupEditor(a,c,g,e)},_startupEditor:function(a,c,g,e){a.domNode&&(a._started||a.startup(),a._dgridIgnoreChange=!0,a.set("value",e),setTimeout(function(){a._dgridIgnoreChange=!1},0));a._dgridLastValue=e;this._activeCell&&(this._activeValue=e,p.emit(g,"dgrid-editor-show",{grid:this,cell:this.cell(g),column:c,editor:a,bubbles:!0,cancelable:!1}))},_startupPendingEditors:function(){for(var a=this._editorsPendingStartup,c=a.length;c--;)this._startupEditor.apply(this,
a[c]);this._editorsPendingStartup=[]},_handleEditorChange:function(a,c){var g=a.target;"_dgridLastValue"in g&&-1<g.className.indexOf("dgrid-input")&&this._updatePropertyFromEditor(c||this.cell(g).column,g,a)},_createEditor:function(a){var c=a.editor,g=a.editOn,e=this,d="string"!==typeof c&&c,b,f,h={};b=a.editorArgs||{};"function"===typeof b&&(b=b.call(this,a));d?(f=new d(b),b=f.focusNode||f.domNode,b.className+=" dgrid-input",f.on(g?"blur":"change",function(){f._dgridIgnoreChange||e._updatePropertyFromEditor(a,
this,{type:"widget"})})):(this._hasInputListener||(this._hasInputListener=!0,this.on("change",function(a){e._handleEditorChange(a)})),"textarea"===c?d="textarea":(d="input",h.type=c),f=b=q.create(d,n.mixin(h,{className:"dgrid-input",name:a.field,tabIndex:isNaN(a.tabIndex)?-1:a.tabIndex},b)),9>m("ie")&&(c="radio"===c||"checkbox"===c?p(f,"click",function(b){e._handleEditorChange(b,a)}):p(f,"change",function(b){e._handleEditorChange(b,a)}),g?this._editorColumnListeners.push(c):this._editorRowListeners?
this._editorRowListeners[a.id]=c:this._editorCellListeners[this.row(object).element.id][a.id]=c));if(a.autoSelect){var l=f.focusNode||f;l.select&&p(l,"focus",function(){setTimeout(function(){l.select()},0)})}return f},_createSharedEditor:function(a){function c(){var a=e._activeCell;f.blur();"function"===typeof e.focus&&setTimeout(function(){e.focus(a)},k&&9>m("ie")?15:0)}var g=this._createEditor(a),e=this,k=g.domNode,b=g.domNode||g,f=g.focusNode||b,l=k?function(){g.set("value",g._dgridLastValue)}:
function(){e._updateInputValue(g,g._dgridLastValue);e._updatePropertyFromEditor(a,g)};this._editorColumnListeners.push(p(f,"keydown",function(b){b=b.keyCode||b.which;27===b?(l(),e._activeValue=g._dgridLastValue,c()):13===b&&!1!==a.dismissOnEnter&&c()}));(a._editorBlurHandle=p.pausable(g,"blur",function(){var c=b.parentNode,f={alreadyHooked:!0},k=e.cell(b);p.emit(k.element,"dgrid-editor-hide",{grid:e,cell:k,column:a,editor:g,bubbles:!0,cancelable:!1});a._editorBlurHandle.pause();c.removeChild(b);k.row&&
(d.remove(k.element,"dgrid-cell-editing"),q.empty(c),h.appendIfNode(c,a.renderCell(k.row.data,e._activeValue,c,e._activeOptions?n.delegate(f,e._activeOptions):f)));e._focusedEditorCell=e._activeCell=e._activeValue=e._activeOptions=null})).pause();this._editorColumnListeners.push(a._editorBlurHandle);return g},_updatePropertyFromEditor:function(a,c,g){var e;if(!c.isValid||c.isValid())if(g=this._updateProperty((c.domNode||c).parentNode,this._activeCell?this._activeValue:c._dgridLastValue,this._retrieveEditorValue(a,
c),g),this._activeCell?this._activeValue=g:c._dgridLastValue=g,"radio"===c.type&&c.name&&!a.editOn&&a.field)for(e in g=this.row(c),l("input[type\x3dradio][name\x3d"+c.name+"]",this.contentNode).forEach(function(e){var b=this.row(e);e!==c&&e._dgridLastValue&&(e._dgridLastValue=!1,this.updateDirty?this.updateDirty(b.id,a.field,!1):b.data[a.field]=!1)},this),this.dirty)g.id.toString()!==e&&this.dirty[e][a.field]&&this.updateDirty(e,a.field,!1)},_updateProperty:function(a,c,g,e){var d=this;if((c&&c.valueOf())!==
(g&&g.valueOf())){var b=this.cell(a),f=b.row,h=b.column;a=b.element;if(h.field&&f)if(b={grid:this,cell:b,oldValue:c,value:g,bubbles:!0,cancelable:!0},e&&e.type&&(b.parentType=e.type),p.emit(a,"dgrid-datachange",b))this.updateDirty?(this.updateDirty(f.id,h.field,g),h.autoSave&&setTimeout(function(){d._trackError("save")},0)):f.data[h.field]=g;else{var m;(m=a.widget)?(m._dgridIgnoreChange=!0,m.set("value",c),setTimeout(function(){m._dgridIgnoreChange=!1},0)):(m=a.input)&&this._updateInputValue(m,c);
return c}}return g},_updateInputValue:function(a,c){a.value=c;if("radio"===a.type||"checkbox"===a.type)a.checked=a.defaultChecked=!!c},_retrieveEditorValue:function(a,c){return"function"===typeof c.get?this._convertEditorValue(c.get("value")):this._convertEditorValue(c["checkbox"===c.type||"radio"===c.type?"checked":"value"])},_convertEditorValue:function(a,c){if("number"===typeof c)a=isNaN(a)?a:parseFloat(a);else if("boolean"===typeof c)a="true"===a?!0:"false"===a?!1:a;else if(c instanceof Date){var g=
new Date(a);a=isNaN(g.getTime())?a:g}return a}})})},"dstore/Store":function(){define("dojo/_base/lang dojo/_base/array dojo/aspect dojo/has dojo/when dojo/Deferred dojo/_base/declare dstore/QueryMethod dstore/Filter dojo/Evented".split(" "),function(t,n,r,q,d,p,m,l,h,a){function c(a){return function(c,b){var f=this;d(c,function(c){c={target:c};var g=b[1]||{};"beforeId"in g&&(c.beforeId=g.beforeId);f.emit(a,c)});return c}}q.add("object-proto",!!{}.__proto__&&!{}.watch);var g=q("object-proto");return m(a,
{constructor:function(e){e&&m.safeMixin(this,e);this.Model&&this.Model.createSubclass&&(this.Model=this.Model.createSubclass([]).extend({_store:this}));this.storage=new a;var g=this;this.autoEmitEvents&&(r.after(this,"add",c("add")),r.after(this,"put",c("update")),r.after(this,"remove",function(a,c){d(a,function(){g.emit("delete",{id:c[0]})});return a}))},autoEmitEvents:!0,idProperty:"id",queryAccessors:!0,getIdentity:function(a){return a.get?a.get(this.idProperty):a[this.idProperty]},_setIdentity:function(a,
c){a.set?a.set(this.idProperty,c):a[this.idProperty]=c},forEach:function(a,c){var b=this;return d(this.fetch(),function(f){for(var g=0,d;void 0!==(d=f[g]);g++)a.call(c,d,g,b);return f})},on:function(a,c){return this.storage.on(a,c)},emit:function(a,c){c=c||{};c.type=a;try{return this.storage.emit(a,c)}finally{return c.cancelable}},parse:null,stringify:null,Model:null,_restore:function(a,c){var b=this.Model;if(b&&a){var f=b.prototype,d=f._restore;d?a=d.call(a,b,c):g&&c?a.__proto__=f:a=t.delegate(f,
a)}return a},create:function(a){return new this.Model(a)},_createSubCollection:function(a){var c=t.delegate(this.constructor.prototype),b;for(b in this)this._includePropertyInSubCollection(b,c)&&(c[b]=this[b]);return m.safeMixin(c,a)},_includePropertyInSubCollection:function(a,c){return!(a in c)||c[a]!==this[a]},queryLog:[],filter:new l({type:"filter",normalizeArguments:function(a){var c=this.Filter;return a instanceof c?[a]:[new c(a)]}}),Filter:h,sort:new l({type:"sort",normalizeArguments:function(a,
c){var b;"function"===typeof a?b=[a]:(b=a instanceof Array?a.slice():"object"===typeof a?[].slice.call(arguments):[{property:a,descending:c}],b=n.map(b,function(a){a=t.mixin({},a);a.descending=!!a.descending;return a}),b=[b]);return b}}),select:new l({type:"select"}),_getQuerierFactory:function(a){return this["_create"+(a[0].toUpperCase()+a.substr(1))+"Querier"]}})})},"dstore/QueryMethod":function(){define([],function(){return function(t){var n=t.type,r=t.normalizeArguments,q=t.applyQuery,d=t.querierFactory;
return function(){var p=Array.prototype.slice.call(arguments),m=r?r.apply(this,p):p,p={type:n,arguments:p,normalizedArguments:m},l=this._getQuerierFactory(n)||d;l&&(p.querier=l.apply(this,m));m=this._createSubCollection({queryLog:this.queryLog.concat(p)});return q?q.call(this,m,p):m}}})},"dstore/Filter":function(){define(["dojo/_base/declare"],function(t){function n(r){return function(){var q=this.constructor,d=new q;d.type=r;d.args=arguments;return this.type?n("and").call(q.prototype,this,d):d}}
t=t(null,{constructor:function(n){var q=typeof n;switch(q){case "object":var q=this,d;for(d in n)var p=n[d],q=p instanceof this.constructor?q[p.type](d,p.args[0]):p&&p.test?q.match(d,p):q.eq(d,p);this.type=q.type;this.args=q.args;break;case "function":case "string":this.type=q,this.args=[n]}},and:n("and"),or:n("or"),eq:n("eq"),ne:n("ne"),lt:n("lt"),lte:n("lte"),gt:n("gt"),gte:n("gte"),contains:n("contains"),"in":n("in"),match:n("match")});t.filterCreator=n;return t})},"dstore/Memory":function(){define("dojo/_base/declare dojo/_base/array ./Store ./Promised ./SimpleQuery ./QueryResults".split(" "),
function(t,n,r,q,d,p){return t([r,q,d],{constructor:function(){this.storage.version=0},postscript:function(){this.inherited(arguments);this.setData(this.data||[])},data:null,autoEmitEvents:!1,getSync:function(d){return this.storage.fullData[this.storage.index[d]]},putSync:function(d,l){l=l||{};var h=this.storage,a=h.index,c=h.fullData,g=this.Model;!g||d instanceof g||(d=this._restore(d));var e=this.getIdentity(d);null==e&&(this._setIdentity(d,"id"in l?l.id:Math.random()),e=this.getIdentity(d));h.version++;
var h=e in a?"update":"add",g={target:d},k;if("update"===h){if(!1===l.overwrite)throw Error("Object already exists");c.splice(k=a[e],1);e=k}else e=this.defaultNewToStart?0:c.length;var b;if("beforeId"in l){var f=l.beforeId;null===f?b=c.length:(b=a[f],k<b&&--b);void 0!==b?g.beforeId=f:(console.error("options.beforeId was specified but no corresponding index was found"),b=e)}else b=e;c.splice(b,0,d);k=isFinite(k)?Math.min(k,b):b;for(e=c.length;k<e;++k)a[this.getIdentity(c[k])]=k;this.emit(h,g);return d},
addSync:function(d,l){(l=l||{}).overwrite=!1;return this.putSync(d,l)},removeSync:function(d){var l=this.storage,h=l.index,l=l.fullData;if(d in h)return h=l.splice(h[d],1)[0],this._reindex(),!0!==this._ignoreChangeEvents&&this.emit("delete",{id:d,target:h}),!0},setData:function(d){this.parse&&(d=this.parse(d));d.items&&(this.idProperty=d.identifier||this.idProperty,d=d.items);this.storage.fullData=this.data=d;this._reindex()},_reindex:function(){for(var d=this.storage,l=d.index={},h=d.fullData,a=
this.Model,c=Object.prototype,g=0,e=h.length;g<e;g++){var k=h[g];if(a&&!(k instanceof a)){var b=this._restore(k,k.__proto__===c);k!==b&&(h[g]=k=b)}l[this.getIdentity(k)]=g}d.version++},fetchSync:function(){var d=this.data;if(!d||d._version!==this.storage.version){for(var d=this.storage.fullData,l=this.queryLog,h=0,a=l.length;h<a;h++)d=l[h].querier(d);d._version=this.storage.version;this.data=d}return new p(d)},fetchRangeSync:function(d){var l=this.fetchSync();return new p(l.slice(d.start,d.end),{totalLength:l.length})},
_includePropertyInSubCollection:function(d){return"data"!==d&&this.inherited(arguments)}})})},"dstore/Promised":function(){define(["dojo/_base/declare","dojo/Deferred","./QueryResults","dojo/when"],function(t,n,r,q){function d(d,m){return function(){var l=new n;try{l.resolve(this[d].apply(this,arguments))}catch(h){l.reject(h)}return m?(l=new r(l.promise),l.totalLength=q(l.totalLength),l):l.promise}}return t(null,{get:d("getSync"),put:d("putSync"),add:d("addSync"),remove:d("removeSync"),fetch:d("fetchSync",
!0),fetchRange:d("fetchRangeSync",!0)})})},"dstore/QueryResults":function(){define(["dojo/_base/lang","dojo/when"],function(t,n){function r(q,d){return n(this,function(p){for(var m=0,l=p.length;m<l;m++)q.call(d,p[m],m,p)})}return function(n,d){var p=d&&"totalLength"in d;if(n.then){n=t.delegate(n);var m=n.then(function(l){var h=p?d.totalLength:l.totalLength||l.length;l.totalLength=h;return!p&&h});n.totalLength=p?d.totalLength:m;n.response=d&&d.response}else n.totalLength=p?d.totalLength:n.length;n.forEach=
r;return n}})},"dstore/SimpleQuery":function(){define(["dojo/_base/declare","dojo/_base/array"],function(t,n){function r(d,p){if(-1<d.indexOf(".")){var m=d.split("."),l=m.length;return function(d){for(var a=0;a<l;a++)d=d&&(p&&d.get?d.get(m[a]):d[m[a]]);return d}}return function(h){return h.get?h.get(d):h[d]}}var q={eq:function(d,p){return d===p},"in":function(d,p){return-1<n.indexOf(p.data||p,d)},ne:function(d,p){return d!==p},lt:function(d,p){return d<p},lte:function(d,p){return d<=p},gt:function(d,
p){return d>p},gte:function(d,p){return d>=p},match:function(d,p,m){return p.test(d,m)},contains:function(d,p,m,l){var h=this;return n.every(p.data||p,function(a){if("object"===typeof a&&a.type){var c=h._getFilterComparator(a.type);return n.some(d,function(g){return c.call(h,g,a.args[1],m,l)})}return-1<n.indexOf(d,a)})}};return t(null,{_createFilterQuerier:function(d){function p(a){var c=a.type;a=a.args;var g=l._getFilterComparator(c);if(g){var e=a[0],d=r(e,m),b=a[1];b&&b.fetchSync&&(b=b.fetchSync());
return function(a){return g.call(l,d(a),b,a,e)}}switch(c){case "and":case "or":for(var f=0,n=a.length;f<n;f++){var q=p(a[f]);h=h?function(a,b){return"and"===c?function(c){return a(c)&&b(c)}:function(c){return a(c)||b(c)}}(h,q):q}return h;case "function":return a[0];case "string":f=l[a[0]];if(!f)throw Error("No filter function "+a[0]+" was found in the collection");return f;case void 0:return function(){return!0};default:throw Error('Unknown filter operation "'+c+'"');}}var m=this.queryAccessors,l=
this,h=p(d);return function(a){return n.filter(a,h)}},_getFilterComparator:function(d){return q[d]||this.inherited(arguments)},_createSelectQuerier:function(d){return function(p){var m=d.length;return n.map(p,d instanceof Array?function(l){for(var h={},a=0;a<m;a++){var c=d[a];h[c]=l[c]}return h}:function(l){return l[d]})}},_createSortQuerier:function(d){var p=this.queryAccessors;return function(m){m=m.slice();m.sort("function"==typeof d?d:function(l,h){for(var a=0;a<d.length;a++){var c,g=d[a];if("function"==
typeof g)c=g(l,h);else{c=g.get||(g.get=r(g.property,p));var g=g.descending,e=c(l);c=c(h);null!=e&&(e=e.valueOf());null!=c&&(c=c.valueOf());c=e===c?0:!!g===(null===e||e>c&&null!==c)?-1:1}if(0!==c)return c}return 0});return m}}})})},"dstore/Tree":function(){define(["dojo/_base/declare"],function(t){return t(null,{constructor:function(){this.root=this},mayHaveChildren:function(n){return"hasChildren"in n?n.hasChildren:!0},getRootCollection:function(){return this.root.filter({parent:null})},getChildren:function(n){return this.root.filter({parent:this.getIdentity(n)})}})})},
"dstore/Cache":function(){define("dojo/_base/array dojo/when dojo/_base/declare dojo/_base/lang ./Store ./Memory ./QueryResults".split(" "),function(t,n,r,q,d,p,m){function l(a){return function(){var g=this.inherited(arguments),e=this.cachingCollection||this.cachingStore;g.cachingCollection=e[a].apply(e,arguments);g.isValidFetchCache=!0===this.canCacheQuery||this.canCacheQuery(a,arguments);return g}}function h(a){a.cachingStore||(a.cachingStore=new p);a.cachingStore.Model=a.Model;a.cachingStore.idProperty=
a.idProperty}var a={cachingStore:null,constructor:function(){h(this)},canCacheQuery:function(a,g){return!1},isAvailableInCache:function(){return this.isValidFetchCache&&(this.allLoaded||this.fetchRequest)||this._parent&&this._parent.isAvailableInCache()},fetch:function(){return this._fetch(arguments)},fetchRange:function(){return this._fetch(arguments,!0)},_fetch:function(a,g){var e=this.cachingStore,d=this.cachingCollection||e,b=this,f=this.isAvailableInCache();if(f)return new m(n(f,function(){return b.isAvailableInCache()?
g?d.fetchRange(a[0]):d.fetch():b.inherited(a)}));f=this.fetchRequest=this.inherited(a);n(f,function(a){var c=!g;b.fetchRequest=null;t.forEach(a,function(a){!b.isLoaded||b.isLoaded(a)?e.put(a):c=!1});c&&(b.allLoaded=!0);return a});return f},isValidFetchCache:!1,get:function(a,g){var e=this.cachingStore,d=this.getInherited(arguments),b=this;return n(this.fetchRequest,function(){return n(e.get(a),function(f){if(void 0!==f)return f;if(d)return n(d.call(b,a,g),function(b){b&&e.put(b,{id:a});return b})})})},
add:function(a,g){var e=this.cachingStore;return n(this.inherited(arguments),function(d){var b=e.put(a&&"object"===typeof d?d:a,g);return d||b})},put:function(a,g){var e=this.cachingStore;e.remove(g&&g.id||this.getIdentity(a));return n(this.inherited(arguments),function(d){var b=e.put(a&&"object"===typeof d?d:a,g);return d||b})},remove:function(a,g){var e=this.cachingStore;return n(this.inherited(arguments),function(d){return n(e.remove(a,g),function(){return d})})},evict:function(a){this.allLoaded=
!1;return this.cachingStore.remove(a)},invalidate:function(){this.allLoaded=!1},_createSubCollection:function(){var a=this.inherited(arguments);a._parent=this;return a},sort:l("sort"),filter:l("filter"),_getQuerierFactory:function(a){var g=this.cachingStore;return this.inherited(arguments)||q.hitch(g,g._getQuerierFactory(a))}};d=r(null,a);d.create=function(c,g){c=r.safeMixin(q.delegate(c),a);r.safeMixin(c,g);h(c);return c};return d})},"dstore/Trackable":function(){define("dojo/_base/lang dojo/_base/declare dojo/aspect dojo/when dojo/promise/all dojo/_base/array dojo/on".split(" "),
function(t,n,r,q,d,p,m){function l(a,g,e){for(var d=a.length-1;0<=d;--d){var b=a[d],f=b.start,b=f+b.count;if(g>b){a.splice(d+1,0,{start:g,count:e-g});return}e>=f&&(g=Math.min(g,f),e=Math.max(e,b),a.splice(d,1))}a.unshift({start:g,count:e-g})}var h=0,a={track:function(){function a(){return function(){var a=this,b=this.inherited(arguments);q(b,function(b){b=a._results=b.slice();a._partialResults&&(a._partialResults=null);a._ranges=[];l(a._ranges,0,b.length)});return b}}function d(){return function(a){var b=
this,c=a.start,e=a.end,f=this.inherited(arguments);this._results||q(f,function(a){return q(a.totalLength,function(f){var d=b._partialResults||(b._partialResults=[]);e=Math.min(e,c+a.length);d.length=f;f=[c,e-c].concat(a);d.splice.apply(d,f);l(b._ranges,c,e);return a})});return f}}function e(a,b){h++;var c=b.target;b=t.delegate(b,I[a]);q(y._results||y._partialResults,function(e){if(e){var f,d,g,h=y._ranges,l,m="id"in b?b.id:k.getIdentity(c),n=-1,r=-1,q=-1,t=-1;if("delete"===a||"update"===a)for(f=0;-1===
n&&f<h.length;++f)for(l=h[f],d=l.start,g=d+l.count;d<g;++d)if(k.getIdentity(e[d])==m){n=b.previousIndex=d;r=f;e.splice(n,1);l.count--;for(d=f+1;d<h.length;++d)h[d].start--;break}if("add"===a||"update"===a){if(H){if(H([c]).length){var u=0;g=h.length-1;d=-1;for(var I;u<=g&&-1===q;)f=u+Math.round((g-u)/2),l=h[f],r=e.slice(l.start,l.start+l.count),"beforeId"in b&&(d=null===b.beforeId?r.length:J(r,b.beforeId)),-1===d&&(d=n>=Math.max(0,l.start-1)&&n<=l.start+l.count?n:k.defaultNewToStart?0:r.length),r.splice(d,
0,c),m=p.indexOf(H(r),c),I=l.start+m,0===m&&0!==l.start?g=f-1:m>=r.length-1&&I<e.length?u=f+1:(q=I,t=f);if(-1===q&&0<u&&u<h.length)var K=!0}}else{d=-1;if("beforeId"in b)if(null===b.beforeId)q=e.length,d=h.length-1;else for(f=0,g=h.length;-1===t&&f<g;++f)l=h[f],q=J(e,b.beforeId,l.start,l.start+l.count),-1!==q&&(t=f);else"update"===a?(q=n,t=r):k.defaultNewToStart?d=q=0:(q=e.length,d=h.length-1);-1!==d&&-1===t&&(l=h[d])&&l.start<=q&&q<=l.start+l.count&&(t=d)}if(-1<q&&-1<t)for(b.index=q,e.splice(q,0,
c),h[t].count++,f=t+1;f<h.length;++f)h[f].start++;else if(K)for(b.beforeIndex=h[u].start,f=u;f<h.length;++f)h[f].start++}b.totalLength=e.length}(e=y["on_tracked"+a])&&e.call(y,b)})}var k=this.store||this,b=[],f={add:1,update:1,"delete":1},u;for(u in f)b.push(this.on(u,function(a){return function(b){e(a,b)}}(u)));var y=n.safeMixin(t.delegate(this),{_ranges:[],fetch:a(),fetchRange:d(),releaseRange:function(a,b){if(this._partialResults){a:for(var c=this._ranges,f=0,e;e=c[f];++f){var d=e.start,g=d+e.count;
if(a<=d)if(b>=g)c.splice(f,1);else{e.start=b;e.count=g-e.start;break a}else if(a<g)if(b>d){c.splice(f,1,{start:d,count:a-d},{start:b,count:g-b});break a}else e.count=a-e.start}for(c=a;c<b;++c)delete this._partialResults[c]}},on:function(a,b){var c=this,e=this.getInherited(arguments);return m.parse(y,a,b,function(a,d){return d in f?r.after(y,"on_tracked"+d,b,!0):e.call(c,d,b)})},tracking:{remove:function(){for(;0<b.length;)b.pop().remove();this.remove=function(){}}},track:null});this.fetchSync&&(n.safeMixin(y,
{fetchSync:a(),fetchRangeSync:d()}),y.fetchSync());var H;p.forEach(this.queryLog,function(a){var b=H,c=a.querier;c&&(H=b?function(a){return c(b(a))}:c)});var I={add:{index:void 0},update:{previousIndex:void 0,index:void 0},"delete":{previousIndex:void 0}},J=function(a,b,c,e){e=void 0!==e?e:a.length;for(c=void 0!==c?c:0;c<e;++c)if(k.getIdentity(a[c])===b)return c;return-1};return y}};d=n(null,a);d.create=function(c,d){c=n.safeMixin(t.delegate(c),a);n.safeMixin(c,d);return c};return d})},"dstore/legacy/DstoreAdapter":function(){define(["dojo/_base/declare",
"dojo/_base/array","dojo/store/util/QueryResults"],function(t,n,r){function q(d){return d}var d={store:null,constructor:function(d){this.store=d;if(d._getQuerierFactory("filter")||d._getQuerierFactory("sort"))this.queryEngine=function(l,h){h=h||{};var a=d._getQuerierFactory("filter"),c=a?a(l):q,a=d._getQuerierFactory("sort"),g=q;a&&(g=a(n.map(h.sort,function(a){return{property:a.attribute,descending:a.descending}})));var e=q;isNaN(h.start)&&isNaN(h.count)||(e=function(a){var b=h.start||0,b=a.slice(b,
b+(h.count||Infinity));b.total=a.length;return b});return function(a){return e(g(c(a)))}};var m=this;d.on("add,update,delete",function(l){var h=l.type,a=l.target;m.notify("add"===h||"update"===h?a:void 0,"delete"===h||"update"===h?"id"in l?l.id:d.getIdentity(a):void 0)})},labelAttr:"title",getLabel:function(d){return this.store.getLabel(d)},query:function(d,m){m=m||{};var l=this.store.filter(d),h,a,c;if(c=m.sort)if("[object Array]"===Object.prototype.toString.call(c))for(var g;g=c.pop();)l=l.sort(g.attribute,
g.descending);else l=l.sort(c);l.track&&!l.tracking&&(l=l.track(),a=!0);"start"in m&&(h=m.start||0,h=l[l.fetchRangeSync?"fetchRangeSync":"fetchRange"]({start:h,end:m.count?h+m.count:Infinity}));h=h||l[l.fetchSync?"fetchSync":"fetch"]();c=h.totalLength;h=new r(h);h.total=c;h.observe=function(c,d){function b(b){return void 0===b&&a?-1:b}var f=l.on("add",function(a){c(a.target,-1,b(a.index))}),g=l.on("update",function(a){!d&&a.previousIndex===a.index&&isFinite(a.index)||c(a.target,b(a.previousIndex),
b(a.index))}),h=l.on("delete",function(a){c(a.target,b(a.previousIndex),-1)}),m={remove:function(){f.remove();g.remove();h.remove()}};m.cancel=m.remove;return m};return h},notify:function(){}};n.forEach(["get","put","add","remove","getIdentity"],function(n){d[n]=function(){var d=this.store;return(d[n+"Sync"]||d[n]).apply(d,arguments)}});return t(null,d)})}}});
//# sourceMappingURL=dgrid.js.map